(function(i,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("ethers")):typeof define=="function"&&define.amd?define(["exports","vue","ethers"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i.Tulipe={},i.vue,i.ethers))})(this,function(i,t,f){"use strict";class rt{constructor(){}init(e=null){this.config=new Z(e),this.status=new y("dapp",["UNSAFE","ERROR","INITIALIZED"]),this.isSafe=t.computed(()=>this.status.is("INITIALIZED")),this.OnSafe=R,this.chainWatchers=new Y,this.wallets=new et,this.provider=new J,this.pro=this.provider,this.signer=new X,this.sig=this.signer,this.contracts=new st,this.con=this.contracts}onSafe(e){const n=t.getCurrentInstance();if(this.isSafe.value)e(n);else{const s=t.watch(this.isSafe,()=>{this.isSafe.value&&(e(n),s())})}}}const r=new rt;function S(o){return o&&typeof o=="object"&&!Array.isArray(o)}function _(o,...e){if(!e.length)return o;const n=e.shift();if(S(o)&&S(n))for(const s in n)S(n[s])?(o[s]||Object.assign(o,{[s]:{}}),_(o[s],n[s])):Object.assign(o,{[s]:n[s]});return _(o,...e)}function T(o){const e=o.split(" ");for(let n=0;n<e.length;n++)e[n]=e[n][0].toUpperCase()+e[n].substring(1);return e.join(" ")}function E(o){return t.isRef(o)?o.value:o}function m(o,e){t.isRef(o)?o.value=e:o=e}const re="",k={required:!1,type:String,default:"minimal",validator(o){return["unstylized","minimal","opinionated"].includes(o)}},ot={class:"ContractInteractor"},ct=t.createTextVNode(" Methods : "),it=t.createElementVNode("br",null,null,-1),lt=t.createTextVNode(" Events : "),dt=t.createElementVNode("br",null,null,-1),j={__name:"ContractInteractor",props:{contract:{type:String,required:!0}},setup(o){const e=o,n=r.contracts[e.contract];let s=t.ref("not owned");return r.contracts[e.contract].onReadSafe(async function(){try{s.value=await n.owner()}catch{}}),(a,c)=>{const l=t.resolveComponent("OnContractReadSafe");return t.openBlock(),t.createBlock(l,{contract:e.contract},{default:t.withCtx(()=>[t.createElementVNode("div",ot,[t.createElementVNode("ul",null,[t.createElementVNode("li",null,"Address : "+t.toDisplayString(t.unref(n).address),1),t.createElementVNode("li",null,"Owner : "+t.toDisplayString(s.value),1),t.createElementVNode("li",null,[ct,it,t.createVNode(t.unref(C),{contract:e.contract},null,8,["contract"])]),t.createElementVNode("li",null,[lt,dt,t.createVNode(t.unref(N),{contract:e.contract},null,8,["contract"])])])])]),_:1},8,["contract"])}}},ht={class:"MethodsInteractor"},C={__name:"MethodsInteractor",props:{contract:{type:String,required:!0}},setup(o){const e=o,n=r.contracts[e.contract];return(s,a)=>{const c=t.resolveComponent("OnContractReadSafe");return t.openBlock(),t.createBlock(c,{contract:e.contract},{default:t.withCtx(()=>[t.createElementVNode("div",ht,[t.createElementVNode("ul",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(n).interface.functions,(l,d)=>(t.openBlock(),t.createElementBlock("li",null,[t.createVNode(t.unref(O),{contract:e.contract,method:d},null,8,["contract","method"])]))),256))])])]),_:1},8,["contract"])}}},ut={class:"MethodInteractor"},mt={key:0},pt=t.createElementVNode("p",null,"Inputs :",-1),ft=["onUpdate:modelValue","placeholder"],_t={key:0},yt={key:1},Et=t.createElementVNode("p",null,"Outputs :",-1),St=["onUpdate:modelValue","placeholder"],gt=["placeholder"],wt={key:2},O={__name:"MethodInteractor",props:{contract:{type:String,required:!0},method:{type:String,required:!0}},setup(o){const e=o,n=t.shallowRef(new x(e.contract,e.method));function s(a){return`${a.name&&a.name!=="null"?a.name:""} (${a.type})`}return(a,c)=>{const l=t.resolveComponent("OnContractReadSafe");return t.openBlock(),t.createBlock(l,{contract:e.contract},{default:t.withCtx(()=>[t.createElementVNode("div",ut,[t.createVNode(t.unref(I),{contract:e.contract,method:e.method,modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),configs:{content:e.method,notx:!0,noerror:!0}},null,8,["contract","method","modelValue","configs"]),t.createElementVNode("small",null,t.toDisplayString(n.value.methodInfos.stateMutability),1),Object.keys(n.value.methodInfos.inputs).length>0||n.value.methodInfos.payable?(t.openBlock(),t.createElementBlock("div",mt,[pt,t.createElementVNode("ul",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.value.methodInfos.inputs,(d,h)=>(t.openBlock(),t.createElementBlock("li",null,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":u=>n.value.args[h]=u,type:"text",placeholder:s(d)},null,8,ft),[[t.vModelText,n.value.args[h]]])]))),256)),n.value.methodInfos.payable?(t.openBlock(),t.createElementBlock("li",_t,[t.createVNode(t.unref(W),{modelValue:n.value.txArgs.value.value,"onUpdate:modelValue":c[1]||(c[1]=d=>n.value.txArgs.value.value=d)},null,8,["modelValue"])])):t.createCommentVNode("",!0)])])):t.createCommentVNode("",!0),Object.keys(n.value.methodInfos.outputs).length>0?(t.openBlock(),t.createElementBlock("div",yt,[Et,t.createElementVNode("ul",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.value.methodInfos.outputs,(d,h)=>(t.openBlock(),t.createElementBlock("li",null,[n.value.data.value?t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:0,"onUpdate:modelValue":u=>n.value.data.value[h]=u,type:"text",placeholder:s(d),disabled:""},null,8,St)),[[t.vModelText,n.value.data.value[h]]]):(t.openBlock(),t.createElementBlock("input",{key:1,type:"text",placeholder:s(d),disabled:""},null,8,gt))]))),256))])])):t.createCommentVNode("",!0),n.value.status.is("ERROR")?(t.openBlock(),t.createElementBlock("p",wt,t.toDisplayString(n.value.error.value.reason),1)):t.createCommentVNode("",!0)])]),_:1},8,["contract"])}}},kt={class:"EventsInteractor"},N={__name:"EventsInteractor",props:{contract:{type:String,required:!0}},setup(o){const e=o,n=r.contracts[e.contract];return(s,a)=>{const c=t.resolveComponent("OnContractReadSafe");return t.openBlock(),t.createBlock(c,{contract:e.contract},{default:t.withCtx(()=>[t.createElementVNode("div",kt,[t.createElementVNode("ul",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(n).interface.events,(l,d)=>(t.openBlock(),t.createElementBlock("li",null,[t.createVNode(t.unref(b),{contract:e.contract,event:d},null,8,["contract","event"])]))),256))])])]),_:1},8,["contract"])}}},Ct={class:"EventInteractor"},Ot=t.createTextVNode("Logs: "),b={__name:"EventInteractor",props:{contract:{type:String,required:!0},event:{type:String,required:!0}},setup(o){const e=o,n=r.contracts[e.contract];let s=t.ref({}),a=t.ref({}),c=t.ref(0),l=t.ref([]);return n.onReadSafe(()=>{s.value=n.interface.events[e.event],a.value=n.filters[s.value.name],n.on(a.value,d=>{c.value++;let h=`Block ${d.blockNumber} -> {`;for(const u of s.value.inputs)h+=`${u.name}:${d.args[u.name]}, `;h=h.substring(0,h.length-2)+"}",l.value.push(h)})}),(d,h)=>{const u=t.resolveComponent("OnContractReadSafe");return t.openBlock(),t.createBlock(u,{contract:e.contract},{default:t.withCtx(()=>[t.createElementVNode("div",Ct,[t.createElementVNode("p",null,t.toDisplayString(s.value.name),1),t.createElementVNode("ul",null,[t.createElementVNode("li",null,"Count : "+t.toDisplayString(c.value),1),t.createElementVNode("li",null,[Ot,t.createElementVNode("ul",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(l.value,at=>(t.openBlock(),t.createElementBlock("li",null,t.toDisplayString(at),1))),256))])])])])]),_:1},8,["contract"])}}},Nt={class:"TransactButton"},bt={key:1,disabled:""},It={key:2,disabled:""},Rt={key:3,disabled:""},Bt={key:4},I={__name:"Transact",props:{modelValue:{},contract:{type:String,required:!0},method:{type:String,required:!0},args:{type:Array,required:!1},txArgs:{type:Object,required:!1},configs:{type:Object,required:!1}},emits:["update:modelValue"],setup(o,{emit:e}){const n=o,s=r.contracts[n.contract];let a=t.computed({get(){return n.modelValue},set(l){e("update:modelValue",l)}});function c(){const l=n.args?n.args:[],d=n.txArgs?n.txArgs:{};a.value.send(l,d)}return n.config&&n.configs.notx&&s.onReadSafe(()=>{a=new x(n.contract,n.method)}),(l,d)=>{const h=t.resolveComponent("OnContractReadSafe");return t.openBlock(),t.createBlock(h,{contract:n.contract},{default:t.withCtx(()=>[t.createElementVNode("div",Nt,[t.unref(a).status.is("READY")?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:c},t.toDisplayString(n.configs&&n.configs.content?n.configs.content:"Transact"),1)):t.unref(a).status.is("SENT")?(t.openBlock(),t.createElementBlock("button",bt,"Transaction sent...")):t.unref(a).status.is("ERROR")?(t.openBlock(),t.createElementBlock("button",It,"Transaction error!")):t.unref(a).status.is("SUCCESS")?(t.openBlock(),t.createElementBlock("button",Rt,"Success !")):t.createCommentVNode("",!0),!(n.configs&&n.configs.noerror)&&t.unref(a).status.is("ERROR")?(t.openBlock(),t.createElementBlock("p",Bt,t.toDisplayString(t.unref(a).error.value.reason),1)):t.createCommentVNode("",!0)])]),_:1},8,["contract"])}}},oe="",A=(o,e)=>{const n=o.__vccOpts||o;for(const[s,a]of e)n[s]=a;return n},Dt={key:1,disabled:""},Vt={key:2,disabled:""},Pt={key:3,disabled:""},Wt={key:4,disabled:""},M=A({__name:"ConnectWalletButton",props:{styleLevel:k},setup(o){const e=o;let n=t.ref({});return r.provider.onSafe(async function(){n.value=await r.config.networks.getCurrent()}),(s,a)=>(t.openBlock(),t.createBlock(t.unref(r).provider.OnSafe,null,{default:t.withCtx(()=>[t.createElementVNode("div",{class:t.normalizeClass(["ConnectWalletButton",`ve-${e.styleLevel}`])},[t.unref(r).signer.status.is("DISCONNECTED")?(t.openBlock(),t.createElementBlock("button",{key:0,onClick:a[0]||(a[0]=c=>t.unref(r).signer.connectWallet(t.unref(r).wallets.metamask))},"Connect Wallet")):t.unref(r).signer.status.is("REQUESTED")?(t.openBlock(),t.createElementBlock("button",Dt,"Connection requested...")):t.unref(r).signer.status.is("REFUSED")?(t.openBlock(),t.createElementBlock("button",Vt,"Connection refused!")):t.unref(r).signer.status.is("ERROR")?(t.openBlock(),t.createElementBlock("button",Pt,"Connection error!")):t.unref(r).provider.status.is("WRONG")?(t.openBlock(),t.createElementBlock("button",Wt,"Wrong network! ("+t.toDisplayString(t.unref(n)?t.unref(n).value.displayName:"unknown")+")",1)):t.unref(r).signer.status.is("CONNECTED")?(t.openBlock(),t.createElementBlock("button",{key:5,onClick:a[1]||(a[1]=(...c)=>t.unref(r).signer.disconnectWallet&&t.unref(r).signer.disconnectWallet(...c))},"Disconnect")):t.createCommentVNode("",!0)],2)]),_:1}))}},[["__scopeId","data-v-2b282558"]]),$t=t.createElementVNode("p",null,"Available wallets :",-1),U={__name:"AvailableWallets",setup(o){return(e,n)=>{const s=t.resolveComponent("OnDappSafe");return t.openBlock(),t.createBlock(s,null,{default:t.withCtx(()=>[$t,t.createElementVNode("ul",null,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(r).wallets,a=>(t.openBlock(),t.createElementBlock("li",null,t.toDisplayString(a.name),1))),256))])]),_:1})}}},xt={class:"SelectNetworkDropdown"},Tt={key:0,selected:""},jt=["src","alt"],At=["onClick"],Mt=["src","alt"],L={__name:"SelectNetworkDropdown",setup(o){let e=t.ref({}),n=t.ref([]);r.onSafe(async function(){e.value=await r.config.networks.getCurrent(),n.value=r.config.networks.getAvailable(),n.value=n.value.filter(l=>l!=e.value)});async function s(l){const d=n.value.find(h=>h.chainId===parseInt(l));if(d){l=f.ethers.utils.hexlify(parseInt(l)).toString(),l=f.ethers.utils.hexValue(l);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:l}]})}catch(h){h.code===4902&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:l,rpcUrls:[d.defaultRPC],chainName:d.name,nativeCurrency:{name:d.currency.symbol,symbol:d.currency.symbol,decimals:d.currency.decimals},blockExplorerUrls:d.explorer&&d.explorer.url!==""?[d.explorer.url]:null}]})}}}function a(){c.value=!c.value}let c=t.ref(!1);return(l,d)=>{const h=t.resolveComponent("OnDappSafe");return t.openBlock(),t.createBlock(h,null,{default:t.withCtx(()=>[t.createElementVNode("div",xt,[t.createElementVNode("ul",{onClick:a},[e.value?(t.openBlock(),t.createElementBlock("li",Tt,[t.createElementVNode("img",{width:"40",src:e.value.icon?e.value.icon:t.unref(r).config.defaults.networks.icon,alt:e.value.name+" logo"},null,8,jt),t.createElementVNode("p",null,t.toDisplayString(e.value.displayName),1)])):t.createCommentVNode("",!0),c.value?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(n.value,u=>(t.openBlock(),t.createElementBlock("li",{key:u.chainId,onClick:at=>s(u.chainId)},[t.createElementVNode("img",{width:"40",src:u.icon?u.icon:t.unref(r).config.defaults.networks.icon,alt:u.name+" logo"},null,8,Mt),t.createElementVNode("p",null,t.toDisplayString(u.displayName),1)],8,At))),128)):t.createCommentVNode("",!0)])])]),_:1})}}},R={__name:"OnDappSafe",setup(o){return(e,n)=>t.unref(r).isSafe.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(e.$slots,"default"),t.renderSlot(e.$slots,"safe")],64)):t.renderSlot(e.$slots,"unsafe",{key:1})}},B={__name:"OnProviderSafe",setup(o){return(e,n)=>t.unref(r).provider.isSafe.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(e.$slots,"default"),t.renderSlot(e.$slots,"safe")],64)):t.renderSlot(e.$slots,"unsafe",{key:1})}},D={__name:"OnSignerSafe",setup(o){return(e,n)=>t.unref(r).signer.isSafe.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(e.$slots,"default"),t.renderSlot(e.$slots,"safe")],64)):t.renderSlot(e.$slots,"unsafe",{key:1})}},F={__name:"OnContractsReadSafe",setup(o){return(e,n)=>t.unref(r).contracts.areReadSafe.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(e.$slots,"default"),t.renderSlot(e.$slots,"safe")],64)):t.renderSlot(e.$slots,"unsafe",{key:1})}},G={__name:"OnContractsWriteSafe",setup(o){return(e,n)=>t.unref(r).contracts.areWriteSafe.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(e.$slots,"default"),t.renderSlot(e.$slots,"safe")],64)):t.renderSlot(e.$slots,"unsafe",{key:1})}},V={__name:"OnContractReadSafe",props:{contract:{type:String,required:!0}},setup(o){const e=o;return(n,s)=>t.unref(r).contracts[e.contract].isReadSafe.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(n.$slots,"default"),t.renderSlot(n.$slots,"safe")],64)):t.renderSlot(n.$slots,"unsafe",{key:1})}},P={__name:"OnContractWriteSafe",props:{contract:{type:String,required:!0}},setup(o){const e=o;return(n,s)=>t.unref(r).contracts[e.contract].isWriteSafe.value?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.renderSlot(n.$slots,"default"),t.renderSlot(n.$slots,"safe")],64)):t.renderSlot(n.$slots,"unsafe",{key:1})}},ie="",q=o=>(t.pushScopeId("data-v-d83f3980"),o=o(),t.popScopeId(),o),Ut=q(()=>t.createElementVNode("h3",null,"Safe Runners",-1)),Lt=q(()=>t.createElementVNode("h3",null,"Status",-1)),H=A({__name:"DebugBar",setup(o){return(e,n)=>{const s=t.resolveComponent("OnDappSafe");return t.openBlock(),t.createBlock(s,null,{default:t.withCtx(()=>[t.createElementVNode("section",null,[t.createElementVNode("div",null,[Ut,t.createElementVNode("ul",null,[t.createElementVNode("li",null,"DApp safe : "+t.toDisplayString(t.unref(r).isSafe),1),t.createElementVNode("li",null,"Network safe : "+t.toDisplayString(t.unref(r).provider.isSafe),1),t.createElementVNode("li",null,"Wallet safe : "+t.toDisplayString(t.unref(r).signer.isSafe),1),t.createElementVNode("li",null,"Contracts read safe : "+t.toDisplayString(t.unref(r).contracts.areReadSafe),1),t.createElementVNode("li",null,"Contracts write safe : "+t.toDisplayString(t.unref(r).contracts.areWriteSafe),1),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(r).contracts.getAll(),(a,c)=>(t.openBlock(),t.createElementBlock("li",null,[t.createTextVNode(" contract "+t.toDisplayString(c)+" : ",1),t.createElementVNode("ul",null,[t.createElementVNode("li",null,"read safe : "+t.toDisplayString(a.isReadSafe),1),t.createElementVNode("li",null,"write safe : "+t.toDisplayString(a.isWriteSafe),1)])]))),256))])]),t.createElementVNode("div",null,[Lt,t.createElementVNode("ul",null,[t.createElementVNode("li",null,"dapp : "+t.toDisplayString(t.unref(r).status.get()),1),t.createElementVNode("li",null,"provider : "+t.toDisplayString(t.unref(r).provider.status.get()),1),t.createElementVNode("li",null,"signer : "+t.toDisplayString(t.unref(r).signer.status.get()),1),t.createElementVNode("li",null,"contracts : "+t.toDisplayString(t.unref(r).contracts.status.get()),1),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(r).contracts.getAll(),(a,c)=>(t.openBlock(),t.createElementBlock("li",null," contract "+t.toDisplayString(c)+" : "+t.toDisplayString(a.status.get()),1))),256))])])])]),_:1})}}},[["__scopeId","data-v-d83f3980"]]),Ft={class:"InputUnits"},Gt=["placeholder"],qt=["value"],W={__name:"InputUnits",props:{modelValue:{},placeholder:{type:String}},emits:["update:modelValue"],setup(o,{emit:e}){const n=o;let s=t.ref(null);const a=["wei","gwei","ether"];let c=t.ref("wei");function l(){if(s.value){const d=f.ethers.utils.parseUnits(s.value,c.value);e("update:modelValue",d)}}return(d,h)=>(t.openBlock(),t.createElementBlock("div",Ft,[t.withDirectives(t.createElementVNode("input",{onInput:l,"onUpdate:modelValue":h[0]||(h[0]=u=>s.value=u),type:"text",placeholder:t.unref(n).placeholder},null,40,Gt),[[t.vModelText,s.value]]),t.withDirectives(t.createElementVNode("select",{onChange:l,"onUpdate:modelValue":h[1]||(h[1]=u=>c.value=u)},[(t.openBlock(),t.createElementBlock(t.Fragment,null,t.renderList(a,u=>t.createElementVNode("option",{value:u},t.toDisplayString(u),9,qt)),64))],544),[[t.vModelSelect,c.value]])]))}},Ht=Object.freeze(Object.defineProperty({__proto__:null,InputUnits:W,styleLevelProp:k,ContractInteractor:j,MethodsInteractor:C,MethodInteractor:O,EventsInteractor:N,EventInteractor:b,Transact:I,ConnectWalletButton:M,AvailableWallets:U,SelectNetworkDropdown:L,OnDappSafe:R,OnProviderSafe:B,OnSignerSafe:D,OnContractsReadSafe:F,OnContractsWriteSafe:G,OnContractReadSafe:V,OnContractWriteSafe:P,DebugBar:H},Symbol.toStringTag,{value:"Module"}));class y{constructor(e,n){if(this._name=e,this.states=[],!Array.isArray(n))throw`The 'states' parameter of a Status instance '${e}' must an array of strings. Got: ${n}`;for(const s of n)this.states.push(this._formatState(s));this._state=t.ref(this.states[0])}_formatState(e){return e.toString().toUpperCase()}_isStateValid(e){return!!this.states.includes(this._formatState(e))}_areStatesValid(e){for(const n of e)if(!this._isStateValid(n))return!1;return!0}get(){return E(this._state)}getRef(){return this._state}set(e){if(e=this._formatState(e),!this._isStateValid(e))throw`The state given to the set() method of Status instance '${this._name}' must a value in ${this.states}. Got: ${e}`;m(this._state,e),console.log(`Status '${this._name}' set to '${E(this._state)}'`)}is(e){if(!this._isStateValid(e))throw`The state given to the is() method of Status instance '${this._name}' must a value in ${this.states}. Got: ${e}`;return this.get()==this._formatState(e)}isIn(e){if(!this._areStatesValid(e))throw`The states given to the isIn() method of Status instance '${this._name}' must be an array with values in ${this.states}. Got: ${e}`;for(const n of e)if(this.is(n))return!0;return!1}watch(e,n){let s=`The states given to the watch() method of Status instance '${this._name}' must be a string or an array with values in ${this.states}. Got: ${e}`;if(Array.isArray(e)){if(!this._areStatesValid(e))throw s;t.watch(this._state,()=>{this.isIn(e)&&n(this.get())})}else{if(!this._isStateValid(e))throw s;t.watch(this._state,()=>{this.is(e)&&n(this.get())})}}watchAny(e){this.watch(this.states,e)}}const p={style:{level:"minimal"},networks:[{name:"Ethereum Mainnet",displayName:"Ethereum",chainId:1,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/ethereum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.infura.io/v3/"},{name:"Ropsten",displayName:"Ropsten (Ethereum Testnet)",chainId:3,type:"testnet",icon:null,currency:{name:"Ropsten Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://ropsten.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://ropsten.infura.io/v3/"},{name:"Rinkeby",displayName:"Rinkeby (Ethereum Testnet)",chainId:4,type:"testnet",icon:null,currency:{name:"Rinkeby Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://rinkeby.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://rinkeby.infura.io/v3/"},{name:"G\xF6rli",displayName:"G\xF6rli (Ethereum Testnet)",chainId:5,type:"testnet",icon:null,currency:{name:"G\xF6rli Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://goerli.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://goerli.infura.io/v3/"},{name:"Optimism",chainId:10,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/optimism.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://optimistic.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.optimism.io/"},{name:"Cronos Mainnet Beta",displayName:"Cronos",chainId:25,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/cronos.svg",currency:{name:"Cronos",symbol:"CRO",decimals:18},contracts:null,explorer:{name:"Cronos Explorer",url:"https://cronos.org/explorer",standard:"EIP3091"},defaultRPC:"https://evm.cronos.org"},{name:"Telos EVM Mainnet",displayName:"Telos",chainId:40,type:"mainnet",icon:null,currency:{name:"Telos",symbol:"TLOS",decimals:18},contracts:null,explorer:{name:"Teloscan",url:"https://teloscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.telos.net/evm"},{name:"Binance Smart Chain Mainnet",displayName:"BSC",chainId:56,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/bsc.svg",currency:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18},contracts:null,explorer:{name:"Bscscan",url:"https://bscscan.com/",standard:"EIP3091"},defaultRPC:"https://bsc-dataseed1.binance.org/"},{name:"Gnosis Chain",displayName:"Gnosis",chainId:100,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/gnosis.svg",currency:{name:"xDAI",symbol:"xDAI",decimals:18},contracts:null,explorer:{name:"Blockscout",url:"https://blockscout.com/xdai/mainnet/",standard:"EIP3091"},defaultRPC:"https://rpc.gnosischain.com"},{name:"Fuse Mainnet",displayName:"Fuse",chainId:122,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/fuse.svg",currency:{name:"Fuse",symbol:"FUSE",decimals:18},contracts:null,explorer:{name:"Fuse Explorer",url:"https://explorer.fuse.io/",standard:"EIP3091"},defaultRPC:"https://rpc.fuse.io"},{name:"Huobi ECO Chain Mainnet",displayName:"HECO",chainId:128,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/heco.svg",currency:{name:"Huobi ECO Chain Native Token",symbol:"HT",decimals:18},contracts:null,explorer:{name:"Hecoinfo",url:"https://hecoinfo.com",standard:"EIP3091"},defaultRPC:"https://http-mainnet.hecochain.com"},{name:"Polygon Mainnet",displayName:"Polygon",chainId:137,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/polygon.svg",currency:{name:"MATIC",symbol:"MATIC",decimals:18},contracts:null,explorer:{name:"Polygonscan",url:"https://polygonscan.com/",standard:"EIP3091"},defaultRPC:"https://polygon-rpc.com/"},{name:"Fantom Opera",displayName:"Fantom",chainId:250,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/fantom.svg",currency:{name:"Fantom",symbol:"FTM",decimals:18},contracts:null,explorer:{name:"Ftmscan",url:"https://ftmscan.com/",standard:"EIP3091"},defaultRPC:"https://rpc.ftm.tools"},{name:"Metis Andromeda Mainnet",displayName:"Metis",chainId:1088,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/metis.svg",currency:{name:"Metis",symbol:"METIS",decimals:18},contracts:null,explorer:{name:"Metis Explorer",url:"https://andromeda-explorer.metis.io",standard:"EIP3091"},defaultRPC:"https://andromeda.metis.io/?owner=1088"},{name:"Moonbeam",chainId:1284,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/moonbeam.svg",currency:{name:"Glimmer",symbol:"GLMR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonbeam.moonscan.io",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonbeam.network"},{name:"Moonriver",chainId:1285,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/moonriver.svg",currency:{name:"Moonriver",symbol:"MOVR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonriver.moonscan.io/",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonriver.moonbeam.network"},{name:"Klaytn Mainnet Cypress",displayName:"Klaytn",chainId:8217,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/klaytn.svg",currency:{name:"KLAY",symbol:"KLAY",decimals:18},contracts:null,explorer:{name:"Klaytnscope",url:"https://scope.klaytn.com",standard:"EIP3091"},defaultRPC:"https://public-node-api.klaytnapi.com/v1/cypress"},{name:"Hardhat",displayName:"Hardhat",chainId:31337,type:"testnet",icon:null,currency:{name:"GoChain Coin",symbol:"GO",decimals:18},contracts:null,explorer:null,defaultRPC:"http://127.0.0.1:8545/"},{name:"Arbitrum One",displayName:"Arbitrum",chainId:42161,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/arbitrum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Arbiscan",url:"https://arbiscan.io/",standard:"EIP3091"},defaultRPC:"https://arbitrum-mainnet.infura.io/v3/"},{name:"Celo Mainnet",displayName:"Celo",chainId:42220,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/celo.svg",currency:{name:"CELO",symbol:"CELO",decimals:18},contracts:null,explorer:{name:"Celo Explorer",url:"https://explorer.celo.org/",standard:"EIP3091"},defaultRPC:"https://forno.celo.org"},{name:"Emerald Paratime Mainnet",displayName:"Emerald",chainId:42262,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/emerald.svg",currency:{name:"Emerald Rose",symbol:"ROSE",decimals:18},contracts:null,explorer:{name:"Emerald Explorer",url:"https://explorer.emerald.oasis.dev/",standard:"EIP3091"},defaultRPC:"https://emerald.oasis.dev"},{name:"Avalanche C-Chain",displayName:"Avalanche",chainId:43114,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/avalanche.svg",currency:{name:"Avalanche",symbol:"AVAX",decimals:18},contracts:null,explorer:{name:"Snowtrace",url:"https://snowtrace.io/",standard:"EIP3091"},defaultRPC:"https://api.avax.network/ext/bc/C/rpc"},{name:"Aurora Mainnet",displayName:"Aurora",chainId:1313161554,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/aurora.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Aurorascan",url:"https://aurorascan.dev",standard:"EIP3091"},defaultRPC:"https://mainnet.aurora.dev"},{name:"Harmony Mainnet Shard 0",displayName:"Harmony",chainId:16666e5,type:"mainnet",icon:"https://static.tuli.pe/icons/networks/harmony.svg",currency:{name:"ONE",symbol:"ONE",decimals:18},contracts:null,explorer:{name:"Harmony Block Explorer",url:"https://explorer.harmony.one",standard:"EIP3091"},defaultRPC:"https://api.harmony.one"}],wallets:[{name:"metamask",displayName:"Metamask",icon:null},{name:"binanceChain",displayName:"Binance Chain",icon:null},{name:"coinbase",displayName:"Coinbase",icon:null}],defaults:{networks:{icon:"https://static.tuli.pe/icons/networks/unknown.svg"},wallets:{icon:"TODO"}}};class Zt{constructor(e=null){let n={};return e?n=_({...p.style},{...e}):n=p.style,window.addEventListener("load",()=>{const s=document.getElementsByClassName("ve-app");if(s)for(const a of s)a&&a.classList.add(`ve-${n.level}`)}),n}}class Yt{constructor(e=null){if(this._list=[],e){for(const n of e)if(n.chainId){const s=p.networks.find(c=>c.chainId===n.chainId),a=_({...s},{...n});a.available!==!1&&(a.available=!0),a.displayName||(a.displayName=a.name),this._list.push(a)}}for(const n of p.networks)this._list.find(a=>a.chainId===n.chainId)||(n.available=!1,this._list.push(n))}async getCurrent(){if(r.provider.proxy.getEthersObject()){const e=await r.provider.getNetwork().then(n=>n.chainId);return this._list.find(n=>n.chainId===e)}return null}getDefault(){return this._list.find(e=>e.default===!0)}getAvailable(){return this._list.filter(e=>e.available)}getAll(){return this._list}}class zt{constructor(e=null){if(this._list=[],e){for(const n of e)if(n.name){const s=p.wallets.find(c=>c.name===n.name),a=_({...s},{...n});a.available!==!1&&(a.available=!0),a.displayName||(a.displayName=a.name),this._list.push(a)}}for(const n of p.wallets)this._list.find(a=>a.name===n.name)||(n.available=!1,this._list.push(n))}async getCurrent(){if(r.signer.getEthersObject()){const e=r.signer.name;return this._list.find(n=>n.name===e)}return null}getDefault(){return this._list.find(e=>e.default===!0)}getAvailable(){return this._list.filter(e=>e.available)}getAll(){return this._list}}class Kt{constructor(e=null){let n={};return e?n=_({...p.defaults},{...e}):n=p.defaults,n}}class Z{constructor(e=null){this.style=new Zt(e?e.style:null),this.networks=new Yt(e?e.networks:null),this.wallets=new zt(e?e.wallets:null),this.defaults=new Kt(e?e.defaults:null)}}class Y{constructor(){this.contracts={},this.wallets={}}async _asyncInit(){r.provider.onSafe(()=>{r.provider.on("block",async function(e){const n=await r.provider.getBlockWithTransactions(e);for(const s of n.transactions)Object.keys(this.contracts).includes(s.to)?this.contracts[s.to].update():Object.keys(this.wallets).includes(s.to)&&this.wallets[s.to].update(),Object.keys(this.contracts).includes(s.from)?this.contracts[s.from].update():Object.keys(this.wallets).includes(s.from)&&this.wallets[s.from].update()})})}addContractWatcher(e){Object.keys(this.contracts).includes(e.address)||(this.contracts[e.address]=new K(e))}removeContractWatcher(e){Object.keys(this.contracts).includes(e.address)&&delete this.contracts[e.address]}addWalletWatcher(e){Object.keys(this.wallets).includes(e)||(this.wallets[e]=new Q(e))}removeContractWatcher(e){Object.keys(this.wallets).includes(e)&&delete this.wallets[e]}}class z{constructor(){this.lastUpdateBlock=0,this.sources={}}_generateDependentUUID(){return"xxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,s=e=="x"?n:n&3|8;return s.toString(16)})}async requiresUpdate(){if(!r.provider.isSafe.value)return!1;const e=await r.provider.getBlockNumber();return this.lastUpdateBlock<e}async updateLastUpdateBlock(){const e=await r.provider.getBlockNumber();this.lastUpdateBlock=e}async _update(){throw"_update() method not implemented in that ChainWatcher child class."}update(){this._update()}}class K extends z{constructor(e){super(),this.contract=e}_buildSourceName(e,n){return`${e}:${n?n.toString():""}`}async _updateState(e){e.args?e.state.value=await this.contract[e.name](...e.args):e.state.value=await this.contract[e.name]()}async _update(){if(await this.requiresUpdate()){for(const e of Object.values(this.sources))this._updateState(e);await this.updateLastUpdateBlock()}}add(e,n,s=null){const a=this._buildSourceName(e,n);let c=!1;Object.keys(this.sources).includes(a)||(this.sources[a]={name:e,args:n,state:t.ref(null),dependents:{}},c=!0);let l=null;s&&(l=t.watch(this.sources[a].state,s));const d=this._generateDependentUUID();return this.sources[a].dependents[d]=l,c&&this._updateState(this.sources[a]),d}remove(e,n,s){const a=this._buildSourceName(e,n);if(Object.keys(this.sources).includes(a)&&Object.keys(this.sources[a].dependents).includes(s)){const c=this.sources[a].dependents[s];c&&c(),delete this.sources[a].dependents[s]}Object.keys(this.sources[a].dependents).length===0&&delete this.sources[a]}getRef(e,n){const s=this._buildSourceName(e,n);return this.sources[s].state}}class Q extends z{constructor(e){super(),this.address=e,this.availableSources=["balance"]}async _updateState(e){e.name==="balance"&&(e.state.value=await r.provider.getBalance(this.address))}async _update(){if(await this.requiresUpdate()){for(const e of Object.values(this.sources))await this._updateState(e);await this.updateLastUpdateBlock()}}add(e,n,s=null){if(!this.availableSources.includes(e))throw`Sources added to a ChainWalletWatcher must be in ${this.availableSources}. Got ${e}`;const a=this._buildSourceName(e,n);newSource=!1,Object.keys(this.sources).includes(a)||(this.sources[a]={name:e,args:n,state:ref(null),dependents:{}},newSource=!0);let c=null;s&&(c=watch(this.sources[a].state,s));const l=this._generateDependentUUID();return this.sources[a].dependents[l]=c,newSource&&this._updateState(this.sources[a]),l}remove(e,n,s){const a=this._buildSourceName(e,n);if(Object.keys(this.sources).includes(a)&&Object.keys(this.sources[a].dependents).includes(s)){const c=this.sources[a].dependents[s];c&&c(),delete this.sources[a].dependents[s]}Object.keys(this.sources[a].dependents).length===0&&delete this.sources[a]}getRef(e,n){const s=this._buildSourceName(e,n);return this.sources[s].state}}function Qt(o){for(var e=[];o&&o!==Object.prototype;)e.push.apply(e,Object.getOwnPropertyNames(o)),o=Object.getPrototypeOf(o);return e}class Jt{constructor(e){this._parent=e}setEthersObject(e){this._parent._ethersObject=e&&t.markRaw(e),this.extendsEthersObject()}getEthersObject(){return this._parent._ethersObject}extendsEthersObject(){if(this._parent._ethersObject&&this._parent._extensionObject){const e=Qt(this._parent._extensionObject);for(const n of e)if(n!=="constructor")try{this._parent._ethersObject[n]=this._parent._extensionObject[n].bind(this._parent._ethersObject)}catch(s){if(s instanceof TypeError)this._parent._ethersObject[n]=this._parent._extensionObject[n];else throw s}}}}class g{constructor(e=null,n=null){return this._ethersObject=null,this._extensionObject=n,this.proxy=new Jt(this),this.proxy.setEthersObject(e),new Proxy(this,{get:function(s,a,c){if(s._ethersObject&&s._ethersObject[a])try{return s._ethersObject[a].bind(s._ethersObject)}catch(l){if(l.message.includes(".bind is not a function"))return s._ethersObject[a];throw l}else if(s[a])return s[a]},set:function(s,a,c){return s._ethersObject&&s._ethersObject[a]?(s._ethersObject[a]=c,!0):(s[a]=c,!0)}})}}class Xt{}class J extends g{constructor(e=null){const n=new Xt;super(e,n),this.status=new y("provider",["DISCONNECTED","WRONG","ERROR","CONNECTED"]),this.isSafe=t.computed(()=>r.isSafe.value&&!this.status.isIn(["DISCONNECTED","ERROR"])),this.OnSafe=B,this._asyncInit()}async _getProviderFromWebWallet(){for(const e of Object.values(r.wallets))if(e){const n=e.getProvider();if(n)return n}return null}async _initProviderConnection(){const e=await this._getProviderFromWebWallet();if(e)this.proxy.setEthersObject(new f.ethers.providers.Web3Provider(e,"any"));else{const n=r.config.networks.getDefault();n&&n.defaultRPC&&this.proxy.setEthersObject(new f.ethers.providers.JsonRpcProvider(n.defaultRPC))}}async _asyncInit(){if(await this._initProviderConnection(),!this._ethersObject)this.status.set("DISCONNECTED");else{const e=await this.getNetwork();let n=await r.config.networks.getAvailable().find(s=>s.chainId===e.chainId);if(n)this.status.set("CONNECTED");else if(this.status.set("WRONG"),n=r.config.networks.getAll().find(s=>s.chainId===e.chainId),!n){const s={name:e.name,displayName:T(e.name),chainId:e.chainId};r.config.network.append(s)}this.on("network",(s,a)=>{a&&a!==s&&window.location.reload()}),this.on("error",()=>{this.status.set("ERROR")}),n&&n.pollingInterval&&(this.pollingInterval=n.pollingInterval)}}onSafe(e){const n=t.getCurrentInstance();if(this.isSafe.value)e(n);else{const s=t.watch(this.isSafe,()=>{this.isSafe.value&&(e(n),s())})}}}class vt{}class X extends g{constructor(e=null){const n=new vt;super(e,n),this.status=new y("signer",["DISCONNECTED","REQUESTED","REFUSED","ERROR","NO_PROVIDER","WRONG_PROVIDER","CONNECTED"]),r.provider.status.watchAny(s=>{s==="WRONG"?this.status.set("WRONG_PROVIDER"):["DISCONNECTED","ERROR"].includes(s)&&this.status.set("NO_PROVIDER")}),this.status.watch(["REFUSED","ERROR"],()=>{setTimeout(()=>{this.status.set("DISCONNECTED")},5e3)}),this.isSafe=t.computed(()=>r.provider.isSafe.value&&this.status.is("CONNECTED")),this.OnSafe=D,this.address=t.ref(null),this._asyncInit()}async _asyncInit(){const e=this;r.provider.onSafe(async function(){for(const n of Object.values(r.wallets))await e.connectWallet(n,!0)})}onSafe(e){const n=t.getCurrentInstance();if(this.isSafe.value)e(n);else{const s=t.watch(this.isSafe,()=>{this.isSafe.value&&(e(n),s())})}}async connectWallet(e,n=!1){if(r.signer.status.is("DISCONNECTED"))try{const s=await r.provider.getSigner(),a=await s.getAddress();r.signer.proxy.setEthersObject(s),this.address.value=a,r.signer.status.set("CONNECTED")}catch{if(n===!0)r.signer.status.set("DISCONNECTED");else{this.status.set("REQUESTED");try{await e.connect(),this.status.set("CONNECTED")}catch(a){if(a instanceof w)this.status.set("REFUSED");else throw this.status.set("ERROR"),a}}}}disconnectWallet(){r.signer.proxy.setEthersObject(null),this.address.value=null,r.signer.status.set("DISCONNECTED")}}class v{constructor(){this.provider=null,this.name=""}getProvider(){return null}async connect(){throw`connect() method of ${this.name} wallet is not implemented.`}}class w extends Error{constructor(e,...n){super(e,...n),this.message=`${e} wallet has rejected the connection request.`}}class tt extends v{constructor(){super(),this.name="Metamask",this.provider=this.getProvider()}getProvider(){return window.ethereum}async connect(){try{await this.provider.request({method:"eth_requestAccounts"})}catch(e){throw e.code===4001?w(this.name):e}}}class te extends v{constructor(e,n={}){super(),this.name="Coinbase";const s=n.appName||"",a=n.appLogoUrl,c=n.darkMode||!1;this.coinbaseWalletSdk=new e({appName:s,appLogoUrl:a,darkMode:c}),this.provider=this.getProvider()}getProvider(){try{return this.coinbaseWalletSdk.makeWeb3Provider()}catch(e){return console.log(e),null}}async connect(){try{await this.provider.send("eth_requestAccounts")}catch{throw w(this.name)}}}class ee extends tt{constructor(){super(),this.name="BinanceChain"}getProvider(){return window.BinanceChain}}class et{constructor(){const e=r.config.wallets.getAvailable();for(const n of e){const s=nt[n.name];s&&(this[n.name]=new s)}}}const nt={metamask:tt,coinbase:te,binanceChain:ee};class ne{_watch(e,n,s=null){return Object.keys(r.chainWatchers.contracts).includes(this.address)||r.chainWatchers.addContractWatcher(this),r.chainWatchers.contracts[this.address].add(e,n,s)}watch(e,n,s,a=null){const c=this._watch(e,n,s);return a?t.onUnmounted(()=>{r.chainWatchers.contracts[this.address].remove(e,n,c)},a):t.onUnmounted(()=>{r.chainWatchers.contracts[this.address].remove(e,n,c)}),r.chainWatchers.contracts[this.address].remove.bind(r.chainWatchers.contracts[this.address],e,n,c)}watchRef(e,n,s=null){const a=this._watch(e,n,null);return s?t.onUnmounted(()=>{r.chainWatchers.contracts[this.address].remove(e,n,a)},s):t.onUnmounted(()=>{r.chainWatchers.contracts[this.address].remove(e,n,a)}),r.chainWatchers.contracts[this.address].getRef(e,n)}}class $ extends g{constructor(e,n){const s=new ne;super(n,s),this.name=e,this.status=new y(`contract:${e}`,["NO_PROVIDER","WRONG_PROVIDER","ERROR","INITIALIZED"]),r.provider.status.watchAny(a=>{a==="WRONG"?this.status.set("WRONG_PROVIDER"):["DISCONNECTED","ERROR"].includes(a)&&this.status.set("NO_PROVIDER")}),this.isReadSafe=t.computed(()=>r.provider.isSafe.value&&this.status.is("INITIALIZED")),this.isWriteSafe=t.computed(()=>r.signer.isSafe.value&&this.status.is("INITIALIZED")),this.OnReadSafe=t.createVNode(V,{contract:this.name}),this.OnWriteSafe=t.createVNode(P,{contract:this.name}),this._asyncInit()}_watchSignerChanges(e,n){t.watch([r.signer.isSafe],(s,a)=>{console.log("Refresh contract "+this.name),s!==a&&(this.proxy.setEthersObject(null),this._updateContract(e,n))})}_updateContract(e,n){if(r.signer.isSafe.value)this.proxy.setEthersObject(new f.ethers.Contract(e,n,r.signer.proxy.getEthersObject()));else if(r.provider.isSafe.value)this.proxy.setEthersObject(new f.ethers.Contract(e,n,r.provider.proxy.getEthersObject()));else throw`_updateContract() is called for contract ${this.name} but neither provider nor signer are available.`}async _asyncInit(){const e=this;r.provider.onSafe(async function(){try{const n=await r.config.networks.getCurrent();if(n.contracts&&Object.keys(n.contracts).includes(e.name)){const s=n.contracts[e.name];e._updateContract(s.address,s.abi),e._watchSignerChanges(s.address,s.abi),e.status.set("INITIALIZED")}else e.status.set("WRONG_PROVIDER")}catch(n){throw e.status.set("ERROR"),n}})}onReadSafe(e){const n=t.getCurrentInstance();if(this.isReadSafe.value)e(n);else{const s=t.watch(this.isReadSafe,()=>{this.isReadSafe.value&&(e(n),s())})}}onWriteSafe(e){const n=t.getCurrentInstance();if(this.isWriteSafe.value)e(n);else{const s=t.watch(this.isWriteSafe,()=>{this.isWriteSafe.value&&(e(n),s())})}}}class st{constructor(){this.status=new y("contracts",["NO_PROVIDER","WRONG_PROVIDER","ERROR","INITIALIZED"]),r.provider.status.watchAny(e=>{e==="WRONG"?this.status.set("WRONG_PROVIDER"):["DISCONNECTED","ERROR"].includes(e)&&this.status.set("NO_PROVIDER")});for(const e of r.config.networks.getAll())if(e.contracts)for(const n of Object.keys(e.contracts))this[n]=new $(n);this.areReadSafe=t.computed(()=>r.provider.isSafe.value&&this.status.is("INITIALIZED")),this.areWriteSafe=t.computed(()=>r.signer.isSafe.value&&this.status.is("INITIALIZED")),this.status.set("INITIALIZED")}getAll(){const e={};for(const[n,s]of Object.entries(this))s instanceof $&&(e[n]=s);return e}onReadSafe(e){const n=t.getCurrentInstance();if(this.areReadSafe.value)e(n);else{const s=t.watch(this.areReadSafe,()=>{this.areReadSafe.value&&(e(n),s())})}}onWriteSafe(e){const n=t.getCurrentInstance();if(this.areWriteSafe.value)e(n);else{const s=t.watch(this.areWriteSafe,()=>{this.areWriteSafe.value&&(e(n),s())})}}}class se{}class x extends g{constructor(e,n,s=[],a={value:0}){super(null,new se),this.contractName=e,this.methodName=n,this.methodInfos={},this.args=t.ref(s),this.txArgs=t.ref(a),this.status=new y(`tx:${e}:${n}`,["NOT_READY","READY","SENT","ERROR","SUCCESS"]),this.status.watch(["ERROR","SUCCESS"],()=>{setTimeout(()=>{this.status.set("READY")},3e3)}),this.data=t.ref([]),this.error=t.ref(null),this.call=null,this._init()}_init(){r.contracts[this.contractName].isReadSafe.value&&this._initEthersObject(),r.contracts[this.contractName].onReadSafe(()=>{this._initEthersObject()})}_initEthersObject(){this.methodInfos=r.contracts[this.contractName].interface.functions[this.methodName],this.methodInfos.inputs.forEach(e=>this.args.value.push(null)),this.methodInfos.outputs.forEach(e=>this.data.value.push(null)),this.proxy.setEthersObject(r.contracts[this.contractName][this.methodName]),this.status.set("READY")}send(e=null,n=null){e=e||E(this.args),n=n||E(this.txArgs),e?Array.isArray(e)?this.call=this.proxy.getEthersObject()(...e,n):this.call=this.proxy.getEthersObject()(e,n):this.call=this.proxy.getEthersObject()(n),this.status.set("SENT"),this.methodInfos.constant?this.call.then(s=>{Array.isArray(s)||(s=[s]),m(this.data,s),m(this.error,null),this.status.set("SUCCESS")}).catch(s=>{m(this.error,s),this.status.set("ERROR")}):this.call.then(s=>s.wait()).then(s=>{Array.isArray(s)||(s=[s]),m(this.data,s),m(this.error,null),this.status.set("SUCCESS")}).catch(s=>{m(this.error,s),this.status.set("ERROR")})}}async function ae(o,e){const n=e;try{r.init(n)}catch(a){throw r&&r.status&&r.status.set("ERROR"),a}o.config.globalProperties.dapp=r,o.config.globalProperties.rGet=E,o.config.globalProperties.rSet=m,window.dapp=r;const s=await Promise.resolve().then(()=>Ht);o.component("OnDappSafe",s.OnDappSafe),o.component("OnProviderSafe",s.OnProviderSafe),o.component("OnSignerSafe",s.OnSignerSafe),o.component("OnContractsReadSafe",s.OnContractsReadSafe),o.component("OnContractsWriteSafe",s.OnContractsWriteSafe),o.component("OnContractReadSafe",s.OnContractReadSafe),o.component("OnContractWriteSafe",s.OnContractWriteSafe),r.status.set("INITIALIZED")}i.AvailableWallets=U,i.ChainWatchersList=Y,i.ConnectWalletButton=M,i.ContractInteractor=j,i.ContractWatcher=K,i.ContractsList=st,i.DebugBar=H,i.EthersContractProxy=$,i.EthersProviderProxy=J,i.EthersSignerProxy=X,i.EthersTransactionProxy=x,i.EventInteractor=b,i.EventsInteractor=N,i.InputUnits=W,i.MethodInteractor=O,i.MethodsInteractor=C,i.OnContractReadSafe=V,i.OnContractWriteSafe=P,i.OnContractsReadSafe=F,i.OnContractsWriteSafe=G,i.OnDappSafe=R,i.OnProviderSafe=B,i.OnSignerSafe=D,i.SelectNetworkDropdown=L,i.Status=y,i.Transact=I,i.TulipeConfig=Z,i.WalletConnectionRejected=w,i.WalletWatcher=Q,i.WalletsList=et,i.capitalizeWords=T,i.dapp=r,i.deepMerge=_,i.initTulipe=ae,i.isObject=S,i.rGet=E,i.rSet=m,i.styleLevelProp=k,i.wallets=nt,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
