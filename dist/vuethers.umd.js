(function(u,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("pinia"),require("ethers")):typeof define=="function"&&define.amd?define(["exports","vue","pinia","ethers"],e):(u=typeof globalThis<"u"?globalThis:u||self,e(u.vuethers={},u.Vue,u.Pinia,u.Ethers))})(this,function(u,e,y,w){"use strict";const B=y.defineStore("wallet-status",()=>{let r=e.ref("disconnected");function n(){r.value="disconnected"}function c(){r.value="connection-requested",console.log("connection requested called"),console.log(r.value)}function t(){r.value="connection-refused",setTimeout(n,5e3)}function p(){r.value="connection-error",setTimeout(n,5e3)}function a(){r.value="connected"}function o(){r.value="wrong-network"}return{status:r,setToDisconnected:n,setToConnectionRequested:c,setToConnectionRefused:t,setToConnected:a,setToWrongNetwork:o,setToError:p}}),f=y.defineStore("dapp",()=>{const r=e.ref(null);let n=e.ref(null),c={},t={},p={};const a={wallet:B()};return{provider:r,signer:n,networks:c,contracts:t,config:p,status:a}}),C={networks:[{name:"Ethereum Mainnet",displayName:"Ethereum",chainId:1,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/ethereum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.infura.io/v3/"},{name:"Ropsten",displayName:"Ropsten (Ethereum Testnet)",chainId:3,type:"testnet",icon:null,currency:{name:"Ropsten Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://ropsten.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://ropsten.infura.io/v3/"},{name:"Rinkeby",displayName:"Rinkeby (Ethereum Testnet)",chainId:4,type:"testnet",icon:null,currency:{name:"Rinkeby Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://rinkeby.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://rinkeby.infura.io/v3/"},{name:"G\xF6rli",displayName:"G\xF6rli (Ethereum Testnet)",chainId:5,type:"testnet",icon:null,currency:{name:"G\xF6rli Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://goerli.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://goerli.infura.io/v3/"},{name:"Optimism",chainId:10,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/optimism.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://optimistic.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.optimism.io/"},{name:"Cronos Mainnet Beta",displayName:"Cronos",chainId:25,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/cronos.svg",currency:{name:"Cronos",symbol:"CRO",decimals:18},contracts:null,explorer:{name:"Cronos Explorer",url:"https://cronos.org/explorer",standard:"EIP3091"},defaultRPC:"https://evm.cronos.org"},{name:"Telos EVM Mainnet",displayName:"Telos",chainId:40,type:"mainnet",icon:null,currency:{name:"Telos",symbol:"TLOS",decimals:18},contracts:null,explorer:{name:"Teloscan",url:"https://teloscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.telos.net/evm"},{name:"Binance Smart Chain Mainnet",displayName:"BSC",chainId:56,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/bsc.svg",currency:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18},contracts:null,explorer:{name:"Bscscan",url:"https://bscscan.com/",standard:"EIP3091"},defaultRPC:"https://bsc-dataseed1.binance.org/"},{name:"Gnosis Chain",displayName:"Gnosis",chainId:100,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/gnosis.svg",currency:{name:"xDAI",symbol:"xDAI",decimals:18},contracts:null,explorer:{name:"Blockscout",url:"https://blockscout.com/xdai/mainnet/",standard:"EIP3091"},defaultRPC:"https://rpc.gnosischain.com"},{name:"Fuse Mainnet",displayName:"Fuse",chainId:122,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/fuse.svg",currency:{name:"Fuse",symbol:"FUSE",decimals:18},contracts:null,explorer:{name:"Fuse Explorer",url:"https://explorer.fuse.io/",standard:"EIP3091"},defaultRPC:"https://rpc.fuse.io"},{name:"Huobi ECO Chain Mainnet",displayName:"HECO",chainId:128,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/heco.svg",currency:{name:"Huobi ECO Chain Native Token",symbol:"HT",decimals:18},contracts:null,explorer:{name:"Hecoinfo",url:"https://hecoinfo.com",standard:"EIP3091"},defaultRPC:"https://http-mainnet.hecochain.com"},{name:"Polygon Mainnet",displayName:"Polygon",chainId:137,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/polygon.svg",currency:{name:"MATIC",symbol:"MATIC",decimals:18},contracts:null,explorer:{name:"Polygonscan",url:"https://polygonscan.com/",standard:"EIP3091"},defaultRPC:"https://polygon-rpc.com/"},{name:"Fantom Opera",displayName:"Fantom",chainId:250,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/fantom.svg",currency:{name:"Fantom",symbol:"FTM",decimals:18},contracts:null,explorer:{name:"Ftmscan",url:"https://ftmscan.com/",standard:"EIP3091"},defaultRPC:"https://rpc.ftm.tools"},{name:"Metis Andromeda Mainnet",displayName:"Metis",chainId:1088,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/metis.svg",currency:{name:"Metis",symbol:"METIS",decimals:18},contracts:null,explorer:{name:"Metis Explorer",url:"https://andromeda-explorer.metis.io",standard:"EIP3091"},defaultRPC:"https://andromeda.metis.io/?owner=1088"},{name:"Moonbeam",chainId:1284,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/moonbeam.svg",currency:{name:"Glimmer",symbol:"GLMR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonbeam.moonscan.io",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonbeam.network"},{name:"Moonriver",chainId:1285,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/moonriver.svg",currency:{name:"Moonriver",symbol:"MOVR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonriver.moonscan.io/",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonriver.moonbeam.network"},{name:"Klaytn Mainnet Cypress",displayName:"Klaytn",chainId:8217,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/klaytn.svg",currency:{name:"KLAY",symbol:"KLAY",decimals:18},contracts:null,explorer:{name:"Klaytnscope",url:"https://scope.klaytn.com",standard:"EIP3091"},defaultRPC:"https://public-node-api.klaytnapi.com/v1/cypress"},{name:"Hardhat",displayName:"Hardhat",chainId:31337,type:"testnet",icon:null,currency:{name:"GoChain Coin",symbol:"GO",decimals:18},contracts:null,explorer:null,defaultRPC:"http://127.0.0.1:8545/"},{name:"Arbitrum One",displayName:"Arbitrum",chainId:42161,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/arbitrum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Arbiscan",url:"https://arbiscan.io/",standard:"EIP3091"},defaultRPC:"https://arbitrum-mainnet.infura.io/v3/"},{name:"Celo Mainnet",displayName:"Celo",chainId:42220,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/celo.svg",currency:{name:"CELO",symbol:"CELO",decimals:18},contracts:null,explorer:{name:"Celo Explorer",url:"https://explorer.celo.org/",standard:"EIP3091"},defaultRPC:"https://forno.celo.org"},{name:"Emerald Paratime Mainnet",displayName:"Emerald",chainId:42262,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/emerald.svg",currency:{name:"Emerald Rose",symbol:"ROSE",decimals:18},contracts:null,explorer:{name:"Emerald Explorer",url:"https://explorer.emerald.oasis.dev/",standard:"EIP3091"},defaultRPC:"https://emerald.oasis.dev"},{name:"Avalanche C-Chain",displayName:"Avalanche",chainId:43114,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/avalanche.svg",currency:{name:"Avalanche",symbol:"AVAX",decimals:18},contracts:null,explorer:{name:"Snowtrace",url:"https://snowtrace.io/",standard:"EIP3091"},defaultRPC:"https://api.avax.network/ext/bc/C/rpc"},{name:"Aurora Mainnet",displayName:"Aurora",chainId:1313161554,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/aurora.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Aurorascan",url:"https://aurorascan.dev",standard:"EIP3091"},defaultRPC:"https://mainnet.aurora.dev"},{name:"Harmony Mainnet Shard 0",displayName:"Harmony",chainId:16666e5,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/harmony.svg",currency:{name:"ONE",symbol:"ONE",decimals:18},contracts:null,explorer:{name:"Harmony Block Explorer",url:"https://explorer.harmony.one",standard:"EIP3091"},defaultRPC:"https://api.harmony.one"}],defaults:{networks:{icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/unknown.svg"}}},x={class:"ConnectWalletButton"},P={key:1,disabled:""},T={key:2,disabled:""},R={key:3,disabled:""},S={key:4,disabled:""},V={__name:"_ConnectWalletButton",async setup(r){let n,c;const t=f();async function p(){try{return await t.signer.getAddress(),t.status.wallet.setToConnected(),!0}catch{return!1}}[n,c]=e.withAsyncContext(()=>p()),await n,c();async function a(){if(!await p())try{t.status.wallet.setToConnectionRequested(),await t.provider.send("eth_requestAccounts",[]),t.signer=t.provider.getSigner(),t.status.wallet.setToConnected();for(const[l,i]of Object.entries(t.contracts))t.contracts[l]=await i.connect(t.signer)}catch(l){l.code===4001?t.status.wallet.setToConnectionRefused():t.status.wallet.setToError()}}function o(){t.status.wallet.setToDisconnected()}return(l,i)=>(e.openBlock(),e.createElementBlock("div",x,[e.unref(t).status.wallet.status=="disconnected"?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:a},"Connect Wallet")):e.unref(t).status.wallet.status=="connection-requested"?(e.openBlock(),e.createElementBlock("button",P,"Connection requested...")):e.unref(t).status.wallet.status=="connection-refused"?(e.openBlock(),e.createElementBlock("button",T,"Connection refused!")):e.unref(t).status.wallet.status=="connection-error"?(e.openBlock(),e.createElementBlock("button",R,"Connection error!")):e.unref(t).status.wallet.status=="wrong-network"?(e.openBlock(),e.createElementBlock("button",S,"Wrong network! ("+e.toDisplayString(e.unref(t).networks.current.displayName)+")",1)):e.unref(t).status.wallet.status=="connected"?(e.openBlock(),e.createElementBlock("button",{key:5,onClick:o},"Disconnect")):e.createCommentVNode("",!0)]))}},M={__name:"ConnectWalletButton",setup(r){return(n,c)=>(e.openBlock(),e.createBlock(e.Suspense,null,{default:e.withCtx(()=>[e.createVNode(V)]),_:1}))}},D=e.createTextVNode("Functions : "),A=["onClick"],O=["onUpdate:modelValue","type","placeholder"],F=["onUpdate:modelValue","placeholder"],$={key:0},H=e.createTextVNode(" Events : "),q=e.createElementVNode("p",null,"Logs:",-1),L={__name:"_ContractInteractor",props:{contractName:{type:String,required:!0}},async setup(r){let n,c;const t=r,a=f().contracts[t.contractName],o=([n,c]=e.withAsyncContext(()=>a.owner()),n=await n,c(),n);async function l(s){try{const m=await a[s](...i.value[s].inputs);i.value[s].outputs[0]=m}catch(m){i.value[s].error=m.reason}}const i=e.ref({});for(const s of Object.values(a.interface.functions)){i.value[s.name]={inputs:[],outputs:[],error:null,properties:{constant:s.constant,payable:s.payable,inputs:s.inputs,outputs:s.outputs}};for(const m in s.inputs)i.value[s.name].inputs[m]="";for(const m in s.outputs)i.value[s.name].outputs[m]=""}async function I(s){b.value[s.event].count+=1;let m=`Block ${s.blockNumber} -> {`;for(const d of b.value[s.event].properties.inputs)m+=`${d.name}:${s.args[d.name]}, `;m=m.substring(0,m.length-2)+"}",b.value[s.event].logs.push(m)}const b=e.ref({});for(const s of Object.values(a.interface.events))b.value[s.name]={count:0,logs:[],properties:{inputs:s.inputs}},a.on(s,I);function Q(s){return s.includes("int")?"number":"text"}return(s,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("p",null,"Interact with '"+e.toDisplayString(r.contractName)+"' contract :",1),e.createElementVNode("ul",null,[e.createElementVNode("li",null,"Address : "+e.toDisplayString(e.unref(a).address),1),e.createElementVNode("li",null,"Owner : "+e.toDisplayString(e.unref(o)),1),e.createElementVNode("li",null,[D,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.value,(d,E)=>(e.openBlock(),e.createElementBlock("li",null,[e.createElementVNode("button",{onClick:h=>l(E)},e.toDisplayString(E)+" ("+e.toDisplayString(d.properties.constant?"read-only":"")+e.toDisplayString(d.properties.payable?", payable":"")+")",9,A),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.properties.inputs,(h,k)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{"onUpdate:modelValue":N=>d.inputs[k]=N,type:Q(h.type),placeholder:h.type},null,8,O)),[[e.vModelDynamic,d.inputs[k]]])),256)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.properties.outputs,(h,k)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{"onUpdate:modelValue":N=>d.outputs[k]=N,type:"text",placeholder:h.type,disabled:""},null,8,F)),[[e.vModelText,d.outputs[k]]])),256)),d.error?(e.openBlock(),e.createElementBlock("p",$,e.toDisplayString(d.error),1)):e.createCommentVNode("",!0)]))),256))])]),e.createElementVNode("li",null,[H,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,(d,E)=>(e.openBlock(),e.createElementBlock("li",null,[e.createElementVNode("h3",null,e.toDisplayString(E),1),e.createElementVNode("p",null,"Count : "+e.toDisplayString(d.count),1),q,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.logs,h=>(e.openBlock(),e.createElementBlock("li",null,e.toDisplayString(h),1))),256))])]))),256))])])])],64))}},W={__name:"ContractInteractor",props:{contractName:{type:String,required:!0}},setup(r){const n=r;return(c,t)=>(e.openBlock(),e.createBlock(e.Suspense,null,{default:e.withCtx(()=>[e.createVNode(L,{contractName:n.contractName},null,8,["contractName"])]),_:1}))}},j={class:"SelectNetworkDropdown"},G={key:0,selected:""},U=["src","alt"],K=["onClick"],Y=["src","alt"],z={__name:"SelectNetworkDropdown",setup(r){const n=f();async function c(a){const o=n.networks.available.find(l=>l.chainId===parseInt(a));if(o){a=w.ethers.utils.hexlify(parseInt(a)).toString(),a=w.ethers.utils.hexValue(a);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:a}]})}catch(i){i.code===4902&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:a,rpcUrls:[o.defaultRPC],chainName:o.name,nativeCurrency:{name:o.currency.symbol,symbol:o.currency.symbol,decimals:o.currency.decimals},blockExplorerUrls:o.explorer&&o.explorer.url!==""?[o.explorer.url]:null}]})}const l=await n.provider.getNetwork();n.networks.current.chainId!==l.chainId&&window.location.reload()}}let t=e.ref(!1);function p(){t.value=!t.value}return(a,o)=>(e.openBlock(),e.createElementBlock("div",j,[e.createElementVNode("ul",{onClick:p},[e.unref(n).networks.current?(e.openBlock(),e.createElementBlock("li",G,[e.createElementVNode("img",{width:"40",src:e.unref(n).networks.current.icon?e.unref(n).networks.current.icon:e.unref(n).defaults.networks.icon,alt:e.unref(n).networks.current.name+" logo"},null,8,U),e.createElementVNode("p",null,e.toDisplayString(e.unref(n).networks.current.displayName),1)])):e.createCommentVNode("",!0),t.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(n).networks.available,l=>(e.openBlock(),e.createElementBlock("li",{key:l.chainId,onClick:i=>c(l.chainId)},[e.createElementVNode("img",{width:"40",src:l.icon?l.icon:e.unref(n).defaults.networks.icon,alt:l.name+" logo"},null,8,Y),e.createElementVNode("p",null,e.toDisplayString(l.displayName),1)],8,K))),128)):e.createCommentVNode("",!0)])]))}};function X(r){const n=r.split(" ");for(let c=0;c<n.length;c++)n[c]=n[c][0].toUpperCase()+n[c].substring(1);return n.join(" ")}function _(r){return r&&typeof r=="object"&&!Array.isArray(r)}function g(r,...n){if(!n.length)return r;const c=n.shift();if(_(r)&&_(c))for(const t in c)_(c[t])?(r[t]||Object.assign(r,{[t]:{}}),g(r[t],c[t])):Object.assign(r,{[t]:c[t]});return g(r,...n)}async function J(r,n){y.getActivePinia()||r.use(y.createPinia());const t=f();t.provider=e.markRaw(new w.ethers.providers.Web3Provider(window.ethereum,"any")),t.signer=e.markRaw(t.provider.getSigner()),t.provider.on("network",(a,o)=>{o&&o!==a&&window.location.reload()});const p=await t.provider.getNetwork();if(n){const a=g({...C},{...n});a.networks=[];for(let o of n.networks)if(o.chainId){const l=C.networks.find(i=>i.chainId===o.chainId);o=g({...l},{...o}),o.displayName||(o.displayName=o.name),a.networks.push(o)}if(t.defaults=a.defaults,a.networks)if(t.networks={available:a.networks.filter(o=>o.chainId!==p.chainId),current:a.networks.find(o=>o.chainId===p.chainId),known:C.networks},t.networks.current&&t.networks.current.contracts){let o=!1;try{await t.signer.getAddress(),o=!0}catch{}for(const[l,i]of Object.entries(t.networks.current.contracts)){const I=new w.ethers.Contract(i.address,i.abi,o?t.signer:t.provider);t.contracts[l]=e.markRaw(I)}}else{const o=t.networks.known.find(l=>l.chainId===p.chainId);o?t.networks.current=o:(t.networks.current=p,t.networks.current.displayName=X(t.networks.current.name)),t.status.wallet.setToWrongNetwork()}}}u.ConnectWalletButton=M,u.ContractInteractor=W,u.SelectNetworkDropdown=z,u.initVuethers=J,u.useDappStore=f,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
