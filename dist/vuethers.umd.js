(function(u,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("pinia"),require("ethers")):typeof define=="function"&&define.amd?define(["exports","vue","pinia","ethers"],e):(u=typeof globalThis<"u"?globalThis:u||self,e(u.vuethers={},u.Vue,u.Pinia,u.Ethers))})(this,function(u,e,y,w){"use strict";const N=y.defineStore("wallet-status",()=>{let a=e.ref("disconnected");function r(){a.value="disconnected"}function t(){a.value="connection-requested",console.log("connection requested called"),console.log(a.value)}function n(){a.value="connection-refused",setTimeout(r,5e3)}function i(){a.value="connection-error",setTimeout(r,5e3)}function o(){a.value="connected"}function c(){a.value="wrong-network"}return{status:a,setToDisconnected:r,setToConnectionRequested:t,setToConnectionRefused:n,setToConnected:o,setToWrongNetwork:c,setToError:i}}),f=y.defineStore("dapp",()=>{const a=e.ref(null);let r=e.ref(null),t={},n={},i={};const o={wallet:N()};return{provider:a,signer:r,networks:t,contracts:n,config:i,status:o}}),C={networks:[{name:"Ethereum Mainnet",displayName:"Ethereum",chainId:1,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/ethereum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.infura.io/v3/"},{name:"Ropsten",displayName:"Ropsten (Ethereum Testnet)",chainId:3,type:"testnet",icon:null,currency:{name:"Ropsten Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://ropsten.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://ropsten.infura.io/v3/"},{name:"Rinkeby",displayName:"Rinkeby (Ethereum Testnet)",chainId:4,type:"testnet",icon:null,currency:{name:"Rinkeby Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://rinkeby.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://rinkeby.infura.io/v3/"},{name:"G\xF6rli",displayName:"G\xF6rli (Ethereum Testnet)",chainId:5,type:"testnet",icon:null,currency:{name:"G\xF6rli Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://goerli.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://goerli.infura.io/v3/"},{name:"Optimism",chainId:10,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/optimism.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://optimistic.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.optimism.io/"},{name:"Cronos Mainnet Beta",displayName:"Cronos",chainId:25,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/cronos.svg",currency:{name:"Cronos",symbol:"CRO",decimals:18},contracts:null,explorer:{name:"Cronos Explorer",url:"https://cronos.org/explorer",standard:"EIP3091"},defaultRPC:"https://evm.cronos.org"},{name:"Telos EVM Mainnet",displayName:"Telos",chainId:40,type:"mainnet",icon:null,currency:{name:"Telos",symbol:"TLOS",decimals:18},contracts:null,explorer:{name:"Teloscan",url:"https://teloscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.telos.net/evm"},{name:"Binance Smart Chain Mainnet",displayName:"BSC",chainId:56,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/bsc.svg",currency:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18},contracts:null,explorer:{name:"Bscscan",url:"https://bscscan.com/",standard:"EIP3091"},defaultRPC:"https://bsc-dataseed1.binance.org/"},{name:"Gnosis Chain",displayName:"Gnosis",chainId:100,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/gnosis.svg",currency:{name:"xDAI",symbol:"xDAI",decimals:18},contracts:null,explorer:{name:"Blockscout",url:"https://blockscout.com/xdai/mainnet/",standard:"EIP3091"},defaultRPC:"https://rpc.gnosischain.com"},{name:"Fuse Mainnet",displayName:"Fuse",chainId:122,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/fuse.svg",currency:{name:"Fuse",symbol:"FUSE",decimals:18},contracts:null,explorer:{name:"Fuse Explorer",url:"https://explorer.fuse.io/",standard:"EIP3091"},defaultRPC:"https://rpc.fuse.io"},{name:"Huobi ECO Chain Mainnet",displayName:"HECO",chainId:128,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/heco.svg",currency:{name:"Huobi ECO Chain Native Token",symbol:"HT",decimals:18},contracts:null,explorer:{name:"Hecoinfo",url:"https://hecoinfo.com",standard:"EIP3091"},defaultRPC:"https://http-mainnet.hecochain.com"},{name:"Polygon Mainnet",displayName:"Polygon",chainId:137,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/polygon.svg",currency:{name:"MATIC",symbol:"MATIC",decimals:18},contracts:null,explorer:{name:"Polygonscan",url:"https://polygonscan.com/",standard:"EIP3091"},defaultRPC:"https://polygon-rpc.com/"},{name:"Fantom Opera",displayName:"Fantom",chainId:250,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/fantom.svg",currency:{name:"Fantom",symbol:"FTM",decimals:18},contracts:null,explorer:{name:"Ftmscan",url:"https://ftmscan.com/",standard:"EIP3091"},defaultRPC:"https://rpc.ftm.tools"},{name:"Metis Andromeda Mainnet",displayName:"Metis",chainId:1088,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/metis.svg",currency:{name:"Metis",symbol:"METIS",decimals:18},contracts:null,explorer:{name:"Metis Explorer",url:"https://andromeda-explorer.metis.io",standard:"EIP3091"},defaultRPC:"https://andromeda.metis.io/?owner=1088"},{name:"Moonbeam",chainId:1284,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/moonbeam.svg",currency:{name:"Glimmer",symbol:"GLMR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonbeam.moonscan.io",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonbeam.network"},{name:"Moonriver",chainId:1285,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/moonriver.svg",currency:{name:"Moonriver",symbol:"MOVR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonriver.moonscan.io/",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonriver.moonbeam.network"},{name:"Klaytn Mainnet Cypress",displayName:"Klaytn",chainId:8217,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/klaytn.svg",currency:{name:"KLAY",symbol:"KLAY",decimals:18},contracts:null,explorer:{name:"Klaytnscope",url:"https://scope.klaytn.com",standard:"EIP3091"},defaultRPC:"https://public-node-api.klaytnapi.com/v1/cypress"},{name:"Hardhat",displayName:"Hardhat",chainId:31337,type:"testnet",icon:null,currency:{name:"GoChain Coin",symbol:"GO",decimals:18},contracts:null,explorer:null,defaultRPC:"http://127.0.0.1:8545/"},{name:"Arbitrum One",displayName:"Arbitrum",chainId:42161,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/arbitrum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Arbiscan",url:"https://arbiscan.io/",standard:"EIP3091"},defaultRPC:"https://arbitrum-mainnet.infura.io/v3/"},{name:"Celo Mainnet",displayName:"Celo",chainId:42220,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/celo.svg",currency:{name:"CELO",symbol:"CELO",decimals:18},contracts:null,explorer:{name:"Celo Explorer",url:"https://explorer.celo.org/",standard:"EIP3091"},defaultRPC:"https://forno.celo.org"},{name:"Emerald Paratime Mainnet",displayName:"Emerald",chainId:42262,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/emerald.svg",currency:{name:"Emerald Rose",symbol:"ROSE",decimals:18},contracts:null,explorer:{name:"Emerald Explorer",url:"https://explorer.emerald.oasis.dev/",standard:"EIP3091"},defaultRPC:"https://emerald.oasis.dev"},{name:"Avalanche C-Chain",displayName:"Avalanche",chainId:43114,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/avalanche.svg",currency:{name:"Avalanche",symbol:"AVAX",decimals:18},contracts:null,explorer:{name:"Snowtrace",url:"https://snowtrace.io/",standard:"EIP3091"},defaultRPC:"https://api.avax.network/ext/bc/C/rpc"},{name:"Aurora Mainnet",displayName:"Aurora",chainId:1313161554,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/aurora.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Aurorascan",url:"https://aurorascan.dev",standard:"EIP3091"},defaultRPC:"https://mainnet.aurora.dev"},{name:"Harmony Mainnet Shard 0",displayName:"Harmony",chainId:16666e5,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/harmony.svg",currency:{name:"ONE",symbol:"ONE",decimals:18},contracts:null,explorer:{name:"Harmony Block Explorer",url:"https://explorer.harmony.one",standard:"EIP3091"},defaultRPC:"https://api.harmony.one"}],defaults:{networks:{icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/unknown.svg"}}},B={class:"ConnectWalletButton"},x={key:1,disabled:""},P={key:2,disabled:""},T={key:3,disabled:""},R={key:4,disabled:""},S={__name:"_ConnectWalletButton",async setup(a){let r,t;const n=f();async function i(){try{return await n.signer.getAddress(),n.status.wallet.setToConnected(),!0}catch{return!1}}[r,t]=e.withAsyncContext(()=>i()),await r,t();async function o(){if(!await i())try{n.status.wallet.setToConnectionRequested(),await n.provider.send("eth_requestAccounts",[]),n.signer=n.provider.getSigner(),n.status.wallet.setToConnected();for(const[l,p]of Object.entries(n.contracts))n.contracts[l]=await p.connect(n.signer)}catch(l){l.code===4001?n.status.wallet.setToConnectionRefused():n.status.wallet.setToError()}}function c(){n.status.wallet.setToDisconnected()}return(l,p)=>(e.openBlock(),e.createElementBlock("div",B,[e.unref(n).status.wallet.status=="disconnected"?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o},"Connect Wallet")):e.unref(n).status.wallet.status=="connection-requested"?(e.openBlock(),e.createElementBlock("button",x,"Connection requested...")):e.unref(n).status.wallet.status=="connection-refused"?(e.openBlock(),e.createElementBlock("button",P,"Connection refused!")):e.unref(n).status.wallet.status=="connection-error"?(e.openBlock(),e.createElementBlock("button",T,"Connection error!")):e.unref(n).status.wallet.status=="wrong-network"?(e.openBlock(),e.createElementBlock("button",R,"Wrong network! ("+e.toDisplayString(e.unref(n).networks.current.displayName)+")",1)):e.unref(n).status.wallet.status=="connected"?(e.openBlock(),e.createElementBlock("button",{key:5,onClick:c},"Disconnect")):e.createCommentVNode("",!0)]))}},V={__name:"ConnectWalletButton",setup(a){return(r,t)=>(e.openBlock(),e.createBlock(e.Suspense,null,{default:e.withCtx(()=>[e.createVNode(S)]),_:1}))}},M=e.createTextVNode("Functions : "),D=["onClick"],A=["onUpdate:modelValue","type","placeholder"],O=["onUpdate:modelValue","placeholder"],F={key:0},$=e.createTextVNode(" Events : "),H=e.createElementVNode("p",null,"Logs:",-1),q={__name:"_ContractInteractor",props:{contractName:{type:String,required:!0}},async setup(a){let r,t;const n=a,o=f().contracts[n.contractName],c=([r,t]=e.withAsyncContext(()=>o.owner()),r=await r,t(),r);async function l(s){try{const m=await o[s](...p.value[s].inputs);p.value[s].outputs[0]=m}catch(m){p.value[s].error=m.reason}}const p=e.ref({});for(const s of Object.values(o.interface.functions)){p.value[s.name]={inputs:[],outputs:[],error:null,properties:{constant:s.constant,payable:s.payable,inputs:s.inputs,outputs:s.outputs}};for(const m in s.inputs)p.value[s.name].inputs[m]="";for(const m in s.outputs)p.value[s.name].outputs[m]=""}async function J(s){b.value[s.event].count+=1;let m=`Block ${s.blockNumber} -> {`;for(const d of b.value[s.event].properties.inputs)m+=`${d.name}:${s.args[d.name]}, `;m=m.substring(0,m.length-2)+"}",b.value[s.event].logs.push(m)}const b=e.ref({});for(const s of Object.values(o.interface.events))b.value[s.name]={count:0,logs:[],properties:{inputs:s.inputs}},o.on(s,J);function Q(s){return s.includes("int")?"number":"text"}return(s,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("p",null,"Interact with '"+e.toDisplayString(a.contractName)+"' contract :",1),e.createElementVNode("ul",null,[e.createElementVNode("li",null,"Address : "+e.toDisplayString(e.unref(o).address),1),e.createElementVNode("li",null,"Owner : "+e.toDisplayString(e.unref(c)),1),e.createElementVNode("li",null,[M,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,(d,E)=>(e.openBlock(),e.createElementBlock("li",null,[e.createElementVNode("button",{onClick:h=>l(E)},e.toDisplayString(E)+" ("+e.toDisplayString(d.properties.constant?"read-only":"")+e.toDisplayString(d.properties.payable?", payable":"")+")",9,D),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.properties.inputs,(h,k)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{"onUpdate:modelValue":I=>d.inputs[k]=I,type:Q(h.type),placeholder:h.type},null,8,A)),[[e.vModelDynamic,d.inputs[k]]])),256)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.properties.outputs,(h,k)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{"onUpdate:modelValue":I=>d.outputs[k]=I,type:"text",placeholder:h.type,disabled:""},null,8,O)),[[e.vModelText,d.outputs[k]]])),256)),d.error?(e.openBlock(),e.createElementBlock("p",F,e.toDisplayString(d.error),1)):e.createCommentVNode("",!0)]))),256))])]),e.createElementVNode("li",null,[$,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,(d,E)=>(e.openBlock(),e.createElementBlock("li",null,[e.createElementVNode("h3",null,e.toDisplayString(E),1),e.createElementVNode("p",null,"Count : "+e.toDisplayString(d.count),1),H,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.logs,h=>(e.openBlock(),e.createElementBlock("li",null,e.toDisplayString(h),1))),256))])]))),256))])])])],64))}},L={__name:"ContractInteractor",props:{contractName:{type:String,required:!0}},setup(a){const r=a;return(t,n)=>(e.openBlock(),e.createBlock(e.Suspense,null,{default:e.withCtx(()=>[e.createVNode(q,{contractName:r.contractName},null,8,["contractName"])]),_:1}))}},W={class:"SelectNetworkDropdown"},j={key:0,selected:""},G=["src","alt"],U=["onClick"],K=["src","alt"],Y={__name:"SelectNetworkDropdown",setup(a){const r=f();async function t(o){const c=r.networks.available.find(l=>l.chainId===parseInt(o));if(c){o=w.ethers.utils.hexlify(parseInt(o)).toString(),o=w.ethers.utils.hexValue(o);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]})}catch(p){p.code===4902&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:o,rpcUrls:[c.defaultRPC],chainName:c.name,nativeCurrency:{name:c.currency.symbol,symbol:c.currency.symbol,decimals:c.currency.decimals},blockExplorerUrls:c.explorer&&c.explorer.url!==""?[c.explorer.url]:null}]})}const l=await r.provider.getNetwork();r.networks.current.chainId!==l.chainId&&window.location.reload()}}let n=e.ref(!1);function i(){n.value=!n.value}return(o,c)=>(e.openBlock(),e.createElementBlock("div",W,[e.createElementVNode("ul",{onClick:i},[e.unref(r).networks.current?(e.openBlock(),e.createElementBlock("li",j,[e.createElementVNode("img",{width:"40",src:e.unref(r).networks.current.icon?e.unref(r).networks.current.icon:e.unref(r).defaults.networks.icon,alt:e.unref(r).networks.current.name+" logo"},null,8,G),e.createElementVNode("p",null,e.toDisplayString(e.unref(r).networks.current.displayName),1)])):e.createCommentVNode("",!0),n.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(r).networks.available,l=>(e.openBlock(),e.createElementBlock("li",{key:l.chainId,onClick:p=>t(l.chainId)},[e.createElementVNode("img",{width:"40",src:l.icon?l.icon:e.unref(r).defaults.networks.icon,alt:l.name+" logo"},null,8,K),e.createElementVNode("p",null,e.toDisplayString(l.displayName),1)],8,U))),128)):e.createCommentVNode("",!0)])]))}};function z(a){const r=a.split(" ");for(let t=0;t<r.length;t++)r[t]=r[t][0].toUpperCase()+r[t].substring(1);return r.join(" ")}function _(a){return a&&typeof a=="object"&&!Array.isArray(a)}function g(a,...r){if(!r.length)return a;const t=r.shift();if(_(a)&&_(t))for(const n in t)_(t[n])?(a[n]||Object.assign(a,{[n]:{}}),g(a[n],t[n])):Object.assign(a,{[n]:t[n]});return g(a,...r)}async function X(a){y.getActivePinia()||app.use(y.createPinia());const t=f();t.provider=e.markRaw(new w.ethers.providers.Web3Provider(window.ethereum,"any")),t.signer=e.markRaw(t.provider.getSigner()),t.provider.on("network",(i,o)=>{o&&o!==i&&window.location.reload()});const n=await t.provider.getNetwork();if(a){const i=g({...C},{...a});i.networks=[];for(let o of a.networks)if(o.chainId){const c=C.networks.find(l=>l.chainId===o.chainId);o=g({...c},{...o}),o.displayName||(o.displayName=o.name),i.networks.push(o)}if(t.defaults=i.defaults,i.networks)if(t.networks={available:i.networks.filter(o=>o.chainId!==n.chainId),current:i.networks.find(o=>o.chainId===n.chainId),known:C.networks},t.networks.current&&t.networks.current.contracts){let o=!1;try{await t.signer.getAddress(),o=!0}catch{}for(const[c,l]of Object.entries(t.networks.current.contracts)){const p=new w.ethers.Contract(l.address,l.abi,o?t.signer:t.provider);t.contracts[c]=e.markRaw(p)}}else{const o=t.networks.known.find(c=>c.chainId===n.chainId);o?t.networks.current=o:(t.networks.current=n,t.networks.current.displayName=z(t.networks.current.name)),t.status.wallet.setToWrongNetwork()}}}u.ConnectWalletButton=V,u.ContractInteractor=L,u.SelectNetworkDropdown=Y,u.initVuethers=X,u.useDappStore=f,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
