(function(n,u){typeof exports=="object"&&typeof module<"u"?u(exports,require("ethers"),require("vue")):typeof define=="function"&&define.amd?define(["exports","ethers","vue"],u):(n=typeof globalThis<"u"?globalThis:n||self,u(n.vuethers={},n.Ethers,n.Vue))})(this,function(n,u,e){"use strict";const L={class:"ConnectWalletButton"},v={key:1,disabled:""},H={key:2,disabled:""},q={key:3,disabled:""},K={key:4,disabled:""},Z={__name:"ConnectWalletButton",setup(s){return(t,a)=>{const r=e.resolveComponent("OnProviderSafe");return e.openBlock(),e.createBlock(r,null,{default:e.withCtx(()=>[e.createElementVNode("div",L,[e.unref(n.dapp).signer.status.is("DISCONNECTED")?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:a[0]||(a[0]=(...o)=>e.unref(N)&&e.unref(N)(...o))},"Connect Wallet")):e.unref(n.dapp).signer.status.is("REQUESTED")?(e.openBlock(),e.createElementBlock("button",v,"Connection requested...")):e.unref(n.dapp).signer.status.is("REFUSED")?(e.openBlock(),e.createElementBlock("button",H,"Connection refused!")):e.unref(n.dapp).signer.status.is("ERROR")?(e.openBlock(),e.createElementBlock("button",q,"Connection error!")):e.unref(n.dapp).provider.status.is("WRONG")?(e.openBlock(),e.createElementBlock("button",K,"Wrong network! ("+e.toDisplayString(e.unref(n.dapp).networks.current.displayName)+")",1)):e.unref(n.dapp).signer.status.is("CONNECTED")?(e.openBlock(),e.createElementBlock("button",{key:5,onClick:a[1]||(a[1]=(...o)=>e.unref(C)&&e.unref(C)(...o))},"Disconnect")):e.createCommentVNode("",!0)])]),_:1})}}},z=e.createTextVNode("Functions : "),Q=["onClick"],Y=e.createElementVNode("br",null,null,-1),X={key:0},J=e.createElementVNode("small",null,"Inputs :",-1),x=["onUpdate:modelValue","type","placeholder"],ee={key:0},te=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],ae=["value"],re={key:1},se=e.createElementVNode("small",null,"Outputs :",-1),oe=["onUpdate:modelValue","placeholder"],ie={key:2},ce=e.createTextVNode(" Events : "),le=e.createElementVNode("p",null,"Logs:",-1),de={__name:"ContractInteractor",props:{contract:{type:String,required:!0}},setup(s){const t=s;async function a(i,l,f={}){let h,y,d=null;return l?Array.isArray(l)?d=i(...l,f):d=i(l,f):d=i(f),await d.then(w=>h=w).catch(w=>y=w),{data:h,error:y}}async function r(i){const l=[];for(const d of m.value[i].inputs)l.push(d.value);const f={};m.value[i].payable&&m.value[i].tx.value.value!==""&&(f.value=u.ethers.utils.parseUnits(m.value[i].tx.value.value,m.value[i].tx.value.unit));const{data:h,error:y}=await a(b.value.functions[i],l,f);if(y)m.value[i].error=y.reason;else for(let d=0;d<h.length;d++)m.value[i].outputs[d].value=h[d]}async function o(i){S.value[i.event].count+=1;let l=`Block ${i.blockNumber} -> {`;for(const f of S.value[i.event].inputs)l+=`${f.name}:${i.args[f.name]}, `;l=l.substring(0,l.length-2)+"}",S.value[i.event].logs.push(l)}function c(i){return i.includes("int")?"number":"text"}function p(i){return`${i.name&&i.name!=="null"?i.name:"unnamed"} (${i.type})`}function _(i){const l=[];return l.push(i.mutability),i.payable&&l.push("payable"),l.join(", ")}const b=e.computed(()=>n.dapp.contracts[t.contract]);let G=e.ref("");const Me=["wei","gwei","ether"],S=e.ref({}),m=e.ref({});return n.dapp.contracts.onReadSafe(async function(){G.value=await b.value.owner();for(const i of Object.values(b.value.interface.functions)){m.value[i.name]={inputs:[],outputs:[],error:null,payable:i.payable,mutability:i.stateMutability==="view"||i.stateMutability==="pure"?"read":"write",tx:{value:{value:"",unit:"wei"}}};for(let l=0;l<i.inputs.length;l++)m.value[i.name].inputs[l]={name:i.inputs[l].name,type:i.inputs[l].type,value:""};for(let l=0;l<i.outputs.length;l++)m.value[i.name].outputs[l]={name:i.outputs[l].name,type:i.outputs[l].type,value:""}}for(const i of Object.values(b.value.interface.events))S.value[i.name]={count:0,logs:[],inputs:i.inputs},b.value.on(i,o)}),(i,l)=>{const f=e.resolveComponent("OnContractsReadSafe");return e.openBlock(),e.createBlock(f,null,{default:e.withCtx(()=>[b.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("p",null,"Interact with '"+e.toDisplayString(i.contractName)+"' contract :",1),e.createElementVNode("ul",null,[e.createElementVNode("li",null,"Address : "+e.toDisplayString(b.value.address),1),e.createElementVNode("li",null,"Owner : "+e.toDisplayString(G.value),1),e.createElementVNode("li",null,[z,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(h,y)=>(e.openBlock(),e.createElementBlock("li",null,[e.createElementVNode("button",{onClick:d=>r(y)},e.toDisplayString(y),9,Q),e.createElementVNode("small",null,"("+e.toDisplayString(_(h))+")",1),Y,Object.keys(h.inputs).length>0||h.payable?(e.openBlock(),e.createElementBlock("div",X,[J,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.inputs,(d,w)=>(e.openBlock(),e.createElementBlock("li",null,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":D=>d.value=D,type:c(d.type),placeholder:p(d)},null,8,x),[[e.vModelDynamic,d.value]])]))),256)),h.payable?(e.openBlock(),e.createElementBlock("li",ee,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>h.tx.value.value=d,type:"text",placeholder:"TX value"},null,8,te),[[e.vModelText,h.tx.value.value]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":d=>h.tx.value.unit=d},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(Me,d=>e.createElementVNode("option",{value:d},e.toDisplayString(d),9,ae)),64))],8,ne),[[e.vModelSelect,h.tx.value.unit]])])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),Object.keys(h.outputs).length>0?(e.openBlock(),e.createElementBlock("div",re,[se,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.outputs,(d,w)=>(e.openBlock(),e.createElementBlock("li",null,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":D=>d.value=D,type:"text",placeholder:p(d),disabled:""},null,8,oe),[[e.vModelText,d.value]])]))),256))])])):e.createCommentVNode("",!0),h.error?(e.openBlock(),e.createElementBlock("p",ie,e.toDisplayString(h.error),1)):e.createCommentVNode("",!0)]))),256))])]),e.createElementVNode("li",null,[ce,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.value,(h,y)=>(e.openBlock(),e.createElementBlock("li",null,[e.createElementVNode("h3",null,e.toDisplayString(y),1),e.createElementVNode("p",null,"Count : "+e.toDisplayString(h.count),1),le,e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.logs,d=>(e.openBlock(),e.createElementBlock("li",null,e.toDisplayString(d),1))),256))])]))),256))])])])],64)):e.createCommentVNode("",!0)]),_:1})}}},pe={key:0,class:"SelectNetworkDropdown"},he={key:0,selected:""},ue=["src","alt"],me=["onClick"],fe=["src","alt"],ye={__name:"SelectNetworkDropdown",setup(s){async function t(o){const c=n.dapp.networks.available.find(p=>p.chainId===parseInt(o));if(c){o=u.ethers.utils.hexlify(parseInt(o)).toString(),o=u.ethers.utils.hexValue(o);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]})}catch(_){_.code===4902&&await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:o,rpcUrls:[c.defaultRPC],chainName:c.name,nativeCurrency:{name:c.currency.symbol,symbol:c.currency.symbol,decimals:c.currency.decimals},blockExplorerUrls:c.explorer&&c.explorer.url!==""?[c.explorer.url]:null}]})}const p=await n.dapp.provider.getNetwork();n.dapp.networks.current.chainId!==p.chainId&&window.location.reload()}}function a(){r.value=!r.value}let r=e.ref(!1);return(o,c)=>e.unref(n.dapp).safe?(e.openBlock(),e.createElementBlock("div",pe,[e.createElementVNode("ul",{onClick:a},[e.unref(n.dapp).networks.current?(e.openBlock(),e.createElementBlock("li",he,[e.createElementVNode("img",{width:"40",src:e.unref(n.dapp).networks.current.icon?e.unref(n.dapp).networks.current.icon:e.unref(n.dapp).defaults.networks.icon,alt:e.unref(n.dapp).networks.current.name+" logo"},null,8,ue),e.createElementVNode("p",null,e.toDisplayString(e.unref(n.dapp).networks.current.displayName),1)])):e.createCommentVNode("",!0),r.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(n.dapp).networks.available,p=>(e.openBlock(),e.createElementBlock("li",{key:p.chainId,onClick:_=>t(p.chainId)},[e.createElementVNode("img",{width:"40",src:p.icon?p.icon:e.unref(n.dapp).defaults.networks.icon,alt:p.name+" logo"},null,8,fe),e.createElementVNode("p",null,e.toDisplayString(p.displayName),1)],8,me))),128)):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)}},Fe="",be=(s,t)=>{const a=s.__vccOpts||s;for(const[r,o]of t)a[r]=o;return a},P=s=>(e.pushScopeId("data-v-9c1aef71"),s=s(),e.popScopeId(),s),Ee=P(()=>e.createElementVNode("h3",null,"Safe Runners",-1)),ge=P(()=>e.createElementVNode("h3",null,"Status",-1)),_e=be({__name:"DebugBar",setup(s){return(t,a)=>{const r=e.resolveComponent("OnDappSafe");return e.openBlock(),e.createBlock(r,null,{default:e.withCtx(()=>[e.createElementVNode("section",null,[e.createElementVNode("div",null,[Ee,e.createElementVNode("ul",null,[e.createElementVNode("li",null,"DApp safe : "+e.toDisplayString(e.unref(n.dapp).isSafe),1),e.createElementVNode("li",null,"Network safe : "+e.toDisplayString(e.unref(n.dapp).provider.isSafe),1),e.createElementVNode("li",null,"Wallet safe : "+e.toDisplayString(e.unref(n.dapp).signer.isSafe),1),e.createElementVNode("li",null,"Contracts read safe : "+e.toDisplayString(e.unref(n.dapp).contracts.areReadSafe),1),e.createElementVNode("li",null,"Contracts write safe : "+e.toDisplayString(e.unref(n.dapp).contracts.areWriteSafe),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n.dapp).contracts.getAll(),(o,c)=>(e.openBlock(),e.createElementBlock("li",null,[e.createTextVNode(" contract "+e.toDisplayString(c)+" : ",1),e.createElementVNode("ul",null,[e.createElementVNode("li",null,"read safe : "+e.toDisplayString(o.isReadSafe),1),e.createElementVNode("li",null,"write safe : "+e.toDisplayString(o.isWriteSafe),1)])]))),256))])]),e.createElementVNode("div",null,[ge,e.createElementVNode("ul",null,[e.createElementVNode("li",null,"dapp : "+e.toDisplayString(e.unref(n.dapp).status.get()),1),e.createElementVNode("li",null,"provider : "+e.toDisplayString(e.unref(n.dapp).provider.status.get()),1),e.createElementVNode("li",null,"signer : "+e.toDisplayString(e.unref(n.dapp).signer.status.get()),1),e.createElementVNode("li",null,"contracts : "+e.toDisplayString(e.unref(n.dapp).contracts.status.get()),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n.dapp).contracts.getAll(),(o,c)=>(e.openBlock(),e.createElementBlock("li",null," contract "+e.toDisplayString(c)+" : "+e.toDisplayString(o.status.get()),1))),256))])])])]),_:1})}}},[["__scopeId","data-v-9c1aef71"]]),B={__name:"OnDappSafe",setup(s){return(t,a)=>e.unref(n.dapp).isSafe.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(t.$slots,"default"),e.renderSlot(t.$slots,"safe")],64)):e.renderSlot(t.$slots,"unsafe",{key:1})}},V={__name:"OnProviderSafe",setup(s){return(t,a)=>e.unref(n.dapp).provider.isSafe.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(t.$slots,"default"),e.renderSlot(t.$slots,"safe")],64)):e.renderSlot(t.$slots,"unsafe",{key:1})}},j={__name:"OnSignerSafe",setup(s){return(t,a)=>e.unref(n.dapp).signer.isSafe.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(t.$slots,"default"),e.renderSlot(t.$slots,"safe")],64)):e.renderSlot(t.$slots,"unsafe",{key:1})}},T={__name:"OnContractsReadSafe",setup(s){return(t,a)=>e.unref(n.dapp).contracts.areReadSafe.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(t.$slots,"default"),e.renderSlot(t.$slots,"safe")],64)):e.renderSlot(t.$slots,"unsafe",{key:1})}},$={__name:"OnContractsWriteSafe",setup(s){return(t,a)=>e.unref(n.dapp).contracts.areWriteSafe.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(t.$slots,"default"),e.renderSlot(t.$slots,"safe")],64)):e.renderSlot(t.$slots,"unsafe",{key:1})}},ke={__name:"OnContractReadSafe",props:{contract:{type:String,required:!0}},setup(s){const t=s;return(a,r)=>e.unref(n.dapp).contracts[t.contract].isReadSafe.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(a.$slots,"default"),e.renderSlot(a.$slots,"safe")],64)):e.renderSlot(a.$slots,"unsafe",{key:1})}},Se={__name:"OnContractWriteSafe",props:{contract:{type:String,required:!0}},setup(s){const t=s;return(a,r)=>e.unref(n.dapp).contracts[t.contract].isWriteSafe.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.renderSlot(a.$slots,"default"),e.renderSlot(a.$slots,"safe")],64)):e.renderSlot(a.$slots,"unsafe",{key:1})}};class E{constructor(t,a){if(this._name=t,this.states=[],!Array.isArray(a))throw`The 'states' parameter of a Status instance '${t}' must an array of strings. Got: ${a}`;for(const r of a)this.states.push(this._formatState(r));this._state=e.ref(this.states[0])}_formatState(t){return t.toString().toUpperCase()}_isStateValid(t){return!!this.states.includes(this._formatState(t))}_areStatesValid(t){for(const a of t)if(!this._isStateValid(a))return!1;return!0}get(){return this._state.value}getRef(){return this.state}set(t){if(console.log(`status ${this._name} set to ${t}`),t=this._formatState(t),!this._isStateValid(t))throw`The state given to the set() method of Status instance '${this._name}' must a value in ${this.states}. Got: ${t}`;this._state.value=t}is(t){if(!this._isStateValid(t))throw`The state given to the is() method of Status instance '${this._name}' must a value in ${this.states}. Got: ${t}`;return this.get()==this._formatState(t)}isIn(t){if(!this._areStatesValid(t))throw`The states given to the isIn() method of Status instance '${this._name}' must be an array with values in ${this.states}. Got: ${t}`;for(const a of t)if(this.is(a))return!0;return!1}watch(t,a){let r=`The states given to the watch() method of Status instance '${this._name}' must be a string or an array with values in ${this.states}. Got: ${t}`;if(Array.isArray(t)){if(!this._areStatesValid(t))throw r;e.watch(this._state,()=>{t.includes(this._state)&&a(this.get())})}else{if(!this._isStateValid(t))throw r;e.watch(this._state,()=>{t===this._state&&a(this.get())})}}watchAny(t){this.watch(this.states,t)}}class W{constructor(t){this.contract=t,this.sources={},this.lastUpdateBlock=0}_buildSourceName(t,a){return`${t}:${a.toString()}`}_generateDependentUUID(){return"xxxxxxxx".replace(/[xy]/g,function(t){var a=Math.random()*16|0,r=t=="x"?a:a&3|8;return r.toString(16)})}async update(){const t=await n.dapp.provider.getBlockNumber();if(this.lastUpdateBlock<t){for(const[a,r]of Object.entries(this.sources)){const o=r.state.value;r.state.value=await this.contract[r.name](...r.args);for(const c of Object.values(r.dependents))c&&c(r.state.value,o)}this.lastUpdateBlock=t}}add(t,a,r=null){const o=this._buildSourceName(t,a);Object.keys(this.sources).includes(o)||(this.sources[o]={name:t,args:a,state:e.ref(null),dependents:{}},this.contract[t](...a).then(p=>{this.sources[o].state.value=p}));const c=this._generateDependentUUID();return this.sources[o].dependents[c]=r||null,c}remove(t,a,r){const o=this._buildSourceName(t,a);Object.keys(this.sources).includes(o)&&Object.keys(this.sources[o].dependents).includes(r)&&delete this.sources[o].dependents[r],Object.keys(this.sources[o].dependents).length===0&&delete this.sources[o]}getRef(t,a){const r=this._buildSourceName(t,a);return this.sources[r].state}}async function N(s=!1){if(!n.dapp.provider.isSafe.value){n.dapp.signer.status.set("NO_PROVIDER");return}if(n.dapp.provider.status.is("WRONG")){n.dapp.signer.status.set("WRONG_PROVIDER");return}if(!n.dapp.signer.status.is("CONNECTED"))try{const t=await n.dapp.provider.getSigner();await t.getAddress(),n.dapp.signer.proxy.setEthersObject(t),n.dapp.signer.status.set("CONNECTED")}catch{if(s===!0)n.dapp.signer.status.set("DISCONNECTED");else try{n.dapp.signer.status.set("REQUESTED"),await n.dapp.provider.send("eth_requestAccounts",[]);const a=await n.dapp.provider.getSigner();await a.getAddress(),n.dapp.signer.proxy.setEthersObject(a),n.dapp.signer.status.set("CONNECTED")}catch(a){a.code===4001?n.dapp.signer.status.set("REFUSED"):n.dapp.signer.status.set("ERROR")}}}function C(){n.dapp.signer.proxy.setEthersObject(null),n.dapp.signer.status.set("DISCONNECTED")}function we(s){for(var t=[];s&&s!==Object.prototype;)t.push.apply(t,Object.getOwnPropertyNames(s)),s=Object.getPrototypeOf(s);return t}class Ne{constructor(t){this._parent=t}setEthersObject(t){this._parent._ethersObject=t&&e.markRaw(t),this.extendsEthersObject()}getEthersObject(){return this._parent._ethersObject}extendsEthersObject(){if(this._parent._ethersObject&&this._parent._extensionObject){const t=we(this._parent._extensionObject);for(const a of t)if(a!=="constructor")try{this._parent._ethersObject[a]=this._parent._extensionObject[a].bind(this._parent._ethersObject)}catch(r){if(r instanceof TypeError)this._parent._ethersObject[a]=this._parent._extensionObject[a];else throw r}}}}class I{constructor(t=null,a=null){return this._ethersObject=null,this._extensionObject=a,this.proxy=new Ne(this),this.proxy.setEthersObject(t),new Proxy(this,{get:function(r,o,c){if(r._ethersObject&&r._ethersObject[o])try{return r._ethersObject[o].bind(r._ethersObject)}catch(p){if(p.message.includes(".bind is not a function"))return r._ethersObject[o];throw p}else if(r[o])return r[o]},set:function(r,o,c){return r._ethersObject&&r._ethersObject[o]?(r._ethersObject[o]=c,!0):(r[o]=c,!0)}})}}class Oe{}class A extends I{constructor(t=null){const a=new Oe;super(t,a),this.status=new E("provider",["DISCONNECTED","WRONG","ERROR","CONNECTED"]),this.isSafe=e.computed(()=>n.dapp.isSafe.value&&!this.status.isIn(["DISCONNECTED","ERROR"]))}onSafe(t){const a=e.getCurrentInstance();if(this.isSafe.value)t(a);else{const r=e.watch(this.isSafe,()=>{this.isSafe.value&&(t(a),r())})}}}class Ce{}class M extends I{constructor(t=null){const a=new Ce;super(t,a),this.status=new E("signer",["DISCONNECTED","REQUESTED","REFUSED","ERROR","NO_PROVIDER","WRONG_PROVIDER","CONNECTED"]),this.isSafe=e.computed(()=>n.dapp.provider.isSafe.value&&this.status.is("CONNECTED"))}onSafe(t){const a=e.getCurrentInstance();if(this.isSafe.value)t(a);else{const r=e.watch(this.isSafe,()=>{this.isSafe.value&&(t(a),r())})}}}class Ie{_watch(t,a,r=null){return Object.keys(n.dapp._chainWatchers).includes(this.address)||(n.dapp._chainWatchers[this.address]=new W(this)),n.dapp._chainWatchers[this.address].add(t,a,r)}watch(t,a,r,o=null){const c=this._watch(t,a,r);return e.getCurrentInstance(),o?e.onUnmounted(()=>{n.dapp._chainWatchers[this.address].remove(t,a,c)},o):e.onUnmounted(()=>{n.dapp._chainWatchers[this.address].remove(t,a,c)}),n.dapp._chainWatchers[this.address].remove.bind(n.dapp._chainWatchers[this.address],t,a,c)}watchRef(t,a,r=null){const o=this._watch(t,a,null);return r?e.onUnmounted(()=>{n.dapp._chainWatchers[this.address].remove(t,a,o)},r):e.onUnmounted(()=>{n.dapp._chainWatchers[this.address].remove(t,a,o)}),n.dapp._chainWatchers[this.address].getRef(t,a)}}class g extends I{constructor(t,a){const r=new Ie;super(a,r),this.status=new E(`contract:${t}`,["NO_PROVIDER","WRONG_PROVIDER","ERROR","INITIALIZED"]),this.isReadSafe=e.computed(()=>n.dapp.provider.isSafe.value&&this.status.is("INITIALIZED")),this.isWriteSafe=e.computed(()=>n.dapp.signer.isSafe.value&&this.status.is("INITIALIZED"))}onReadSafe(t){const a=e.getCurrentInstance();if(this.isReadSafe.value)t(a);else{const r=e.watch(this.isReadSafe,()=>{this.isReadSafe.value&&(t(a),r())})}}onWriteSafe(t){const a=e.getCurrentInstance();if(this.isWriteSafe.value)t(a);else{const r=e.watch(this.isWriteSafe,()=>{this.isWriteSafe.value&&(t(a),r())})}}}const R={providers:[{name:"Ethereum Mainnet",displayName:"Ethereum",chainId:1,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/ethereum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.infura.io/v3/"},{name:"Ropsten",displayName:"Ropsten (Ethereum Testnet)",chainId:3,type:"testnet",icon:null,currency:{name:"Ropsten Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://ropsten.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://ropsten.infura.io/v3/"},{name:"Rinkeby",displayName:"Rinkeby (Ethereum Testnet)",chainId:4,type:"testnet",icon:null,currency:{name:"Rinkeby Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://rinkeby.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://rinkeby.infura.io/v3/"},{name:"G\xF6rli",displayName:"G\xF6rli (Ethereum Testnet)",chainId:5,type:"testnet",icon:null,currency:{name:"G\xF6rli Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://goerli.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://goerli.infura.io/v3/"},{name:"Optimism",chainId:10,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/optimism.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Etherscan",url:"https://optimistic.etherscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.optimism.io/"},{name:"Cronos Mainnet Beta",displayName:"Cronos",chainId:25,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/cronos.svg",currency:{name:"Cronos",symbol:"CRO",decimals:18},contracts:null,explorer:{name:"Cronos Explorer",url:"https://cronos.org/explorer",standard:"EIP3091"},defaultRPC:"https://evm.cronos.org"},{name:"Telos EVM Mainnet",displayName:"Telos",chainId:40,type:"mainnet",icon:null,currency:{name:"Telos",symbol:"TLOS",decimals:18},contracts:null,explorer:{name:"Teloscan",url:"https://teloscan.io/",standard:"EIP3091"},defaultRPC:"https://mainnet.telos.net/evm"},{name:"Binance Smart Chain Mainnet",displayName:"BSC",chainId:56,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/bsc.svg",currency:{name:"Binance Chain Native Token",symbol:"BNB",decimals:18},contracts:null,explorer:{name:"Bscscan",url:"https://bscscan.com/",standard:"EIP3091"},defaultRPC:"https://bsc-dataseed1.binance.org/"},{name:"Gnosis Chain",displayName:"Gnosis",chainId:100,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/gnosis.svg",currency:{name:"xDAI",symbol:"xDAI",decimals:18},contracts:null,explorer:{name:"Blockscout",url:"https://blockscout.com/xdai/mainnet/",standard:"EIP3091"},defaultRPC:"https://rpc.gnosischain.com"},{name:"Fuse Mainnet",displayName:"Fuse",chainId:122,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/fuse.svg",currency:{name:"Fuse",symbol:"FUSE",decimals:18},contracts:null,explorer:{name:"Fuse Explorer",url:"https://explorer.fuse.io/",standard:"EIP3091"},defaultRPC:"https://rpc.fuse.io"},{name:"Huobi ECO Chain Mainnet",displayName:"HECO",chainId:128,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/heco.svg",currency:{name:"Huobi ECO Chain Native Token",symbol:"HT",decimals:18},contracts:null,explorer:{name:"Hecoinfo",url:"https://hecoinfo.com",standard:"EIP3091"},defaultRPC:"https://http-mainnet.hecochain.com"},{name:"Polygon Mainnet",displayName:"Polygon",chainId:137,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/polygon.svg",currency:{name:"MATIC",symbol:"MATIC",decimals:18},contracts:null,explorer:{name:"Polygonscan",url:"https://polygonscan.com/",standard:"EIP3091"},defaultRPC:"https://polygon-rpc.com/"},{name:"Fantom Opera",displayName:"Fantom",chainId:250,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/fantom.svg",currency:{name:"Fantom",symbol:"FTM",decimals:18},contracts:null,explorer:{name:"Ftmscan",url:"https://ftmscan.com/",standard:"EIP3091"},defaultRPC:"https://rpc.ftm.tools"},{name:"Metis Andromeda Mainnet",displayName:"Metis",chainId:1088,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/metis.svg",currency:{name:"Metis",symbol:"METIS",decimals:18},contracts:null,explorer:{name:"Metis Explorer",url:"https://andromeda-explorer.metis.io",standard:"EIP3091"},defaultRPC:"https://andromeda.metis.io/?owner=1088"},{name:"Moonbeam",chainId:1284,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/moonbeam.svg",currency:{name:"Glimmer",symbol:"GLMR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonbeam.moonscan.io",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonbeam.network"},{name:"Moonriver",chainId:1285,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/moonriver.svg",currency:{name:"Moonriver",symbol:"MOVR",decimals:18},contracts:null,explorer:{name:"Moonscan",url:"https://moonriver.moonscan.io/",standard:"EIP3091"},defaultRPC:"https://rpc.api.moonriver.moonbeam.network"},{name:"Klaytn Mainnet Cypress",displayName:"Klaytn",chainId:8217,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/klaytn.svg",currency:{name:"KLAY",symbol:"KLAY",decimals:18},contracts:null,explorer:{name:"Klaytnscope",url:"https://scope.klaytn.com",standard:"EIP3091"},defaultRPC:"https://public-node-api.klaytnapi.com/v1/cypress"},{name:"Hardhat",displayName:"Hardhat",chainId:31337,type:"testnet",icon:null,currency:{name:"GoChain Coin",symbol:"GO",decimals:18},contracts:null,explorer:null,defaultRPC:"http://127.0.0.1:8545/"},{name:"Arbitrum One",displayName:"Arbitrum",chainId:42161,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/arbitrum.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Arbiscan",url:"https://arbiscan.io/",standard:"EIP3091"},defaultRPC:"https://arbitrum-mainnet.infura.io/v3/"},{name:"Celo Mainnet",displayName:"Celo",chainId:42220,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/celo.svg",currency:{name:"CELO",symbol:"CELO",decimals:18},contracts:null,explorer:{name:"Celo Explorer",url:"https://explorer.celo.org/",standard:"EIP3091"},defaultRPC:"https://forno.celo.org"},{name:"Emerald Paratime Mainnet",displayName:"Emerald",chainId:42262,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/emerald.svg",currency:{name:"Emerald Rose",symbol:"ROSE",decimals:18},contracts:null,explorer:{name:"Emerald Explorer",url:"https://explorer.emerald.oasis.dev/",standard:"EIP3091"},defaultRPC:"https://emerald.oasis.dev"},{name:"Avalanche C-Chain",displayName:"Avalanche",chainId:43114,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/avalanche.svg",currency:{name:"Avalanche",symbol:"AVAX",decimals:18},contracts:null,explorer:{name:"Snowtrace",url:"https://snowtrace.io/",standard:"EIP3091"},defaultRPC:"https://api.avax.network/ext/bc/C/rpc"},{name:"Aurora Mainnet",displayName:"Aurora",chainId:1313161554,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/aurora.svg",currency:{name:"Ether",symbol:"ETH",decimals:18},contracts:null,explorer:{name:"Aurorascan",url:"https://aurorascan.dev",standard:"EIP3091"},defaultRPC:"https://mainnet.aurora.dev"},{name:"Harmony Mainnet Shard 0",displayName:"Harmony",chainId:16666e5,type:"mainnet",icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/harmony.svg",currency:{name:"ONE",symbol:"ONE",decimals:18},contracts:null,explorer:{name:"Harmony Block Explorer",url:"https://explorer.harmony.one",standard:"EIP3091"},defaultRPC:"https://api.harmony.one"}],defaults:{providers:{icon:"https://storageapi.fleek.co/f3e0e6d9-57d8-48b7-b4ef-b7bbde26978c-bucket/vuethers/networks/unknown.svg"}}};class F{constructor(t=null){if(this.providers=[],t&&t.providers){for(const a of t.providers)if(a.chainId){const r=R.providers.find(c=>c.chainId===a.chainId),o=k({...r},{...a});o.available!==!1&&(o.available=!0),o.displayName||(o.displayName=o.name),this.providers.push(o)}}this.providers.getCurrent=this._getCurrentProvider,this.providers.getDefault=this._getDefaultProvider,this.providers.getAvailable=this._getAvailableProviders,this.providers.getAll=this._getAllProviders,this.defaults={},t&&t.defaults?this.defaults=k({...R.defaults},{...t.defaults}):this.defaults=R.defaults}async _getCurrentProvider(){const t=await n.dapp.provider.getNetwork().then(a=>a.chainId);return n.dapp.config.providers.find(a=>a.chainId===t)}_getDefaultProvider(){return n.dapp.config.providers.find(t=>t.default===!0)}async _getAvailableProviders(){const t=await this.getCurrent();return n.dapp.config.providers.filter(a=>a.available&&a!==t)}_getAllProviders(){return n.dapp.config.providers}}function O(s){return s&&typeof s=="object"&&!Array.isArray(s)}function k(s,...t){if(!t.length)return s;const a=t.shift();if(O(s)&&O(a))for(const r in a)O(a[r])?(s[r]||Object.assign(s,{[r]:{}}),k(s[r],a[r])):Object.assign(s,{[r]:a[r]});return k(s,...t)}function U(s){const t=s.split(" ");for(let a=0;a<t.length;a++)t[a]=t[a][0].toUpperCase()+t[a].substring(1);return t.join(" ")}n.dapp=null;function Re(s,t){const a=t.config,r=t.start;Promise.resolve().then(()=>Be).then(o=>{n.dapp=new o.Dapp(a),s.config.globalProperties.dapp=n.dapp,Promise.resolve().then(()=>Ae).then(async function(p){p.initComponents(s),r(),await p.initProvider(),await p.initSigner(),await p.initContracts(),await p.initWatchers(),n.dapp.status.set("SAFE")})})}class De{constructor(t){this.status=new E("contracts",["NO_PROVIDER","WRONG_PROVIDER","ERROR","INITIALIZED"]);for(const a of t.config.providers)if(a.contracts)for(const[r,o]of Object.entries(a.contracts))this[r]=new g(r);this.areReadSafe=e.computed(()=>t.provider.isSafe.value&&this.status.is("INITIALIZED")),this.areWriteSafe=e.computed(()=>t.signer.isSafe.value&&this.status.is("INITIALIZED"))}add(t,a,r){if(Object.keys(this).includes(t)){if(!this[t]instanceof g)throw`You cannot add a new contract called '${t}', this name is reserved by Vuethers.`;if(n.dapp.signer.isSafe.value)this[t].proxy.setEthersObject(new u.ethers.Contract(a,r,n.dapp.signer.proxy.getEthersObject()));else if(n.dapp.provider.isSafe.value)this[t].proxy.setEthersObject(new u.ethers.Contract(a,r,n.dapp.provider.proxy.getEthersObject()));else throw"A contract is trying to be added from dapp.contract.add() but neither provider nor signer are available."}else if(n.dapp.signer.isSafe.value)this[t]=new g(new u.ethers.Contract(a,r,n.dapp.signer.proxy.getEthersObject()));else if(n.dapp.provider.isSafe.value)this[t]=new g(new u.ethers.Contract(a,r,n.dapp.provider.proxy.getEthersObject()));else throw"A contract is trying to be added from dapp.contract.add() but neither provider nor signer are available."}remove(t){Object.keys(this).includes(t)&&delete this[t]}getAll(){const t={};for(const[a,r]of Object.entries(this))r instanceof g&&(t[a]=r);return t}onReadSafe(t){const a=e.getCurrentInstance();if(this.areReadSafe.value)t(a);else{const r=e.watch(this.areReadSafe,()=>{this.areReadSafe.value&&(t(a),r())})}}onWriteSafe(t){const a=e.getCurrentInstance();if(this.areWriteSafe.value)t(a);else{const r=e.watch(this.areWriteSafe,()=>{this.areWriteSafe.value&&(t(a),r())})}}}class Pe{constructor(t){this.config=new F(t),this.status=new E("dapp",["UNSAFE","SAFE"]),this.provider=new A,this.signer=new M,this.contracts=new De(this),this.isSafe=e.computed(()=>this.status.is("SAFE")),this._chainWatchers={}}onSafe(t){const a=e.getCurrentInstance();if(this.isSafe.value)t(a);else{const r=e.watch(this.isSafe,()=>{this.isSafe.value&&(t(a),r())})}}}const Be=Object.freeze(Object.defineProperty({__proto__:null,Dapp:Pe},Symbol.toStringTag,{value:"Module"}));async function Ve(){try{n.dapp.provider.proxy.setEthersObject(new u.ethers.providers.Web3Provider(window.ethereum,"any"))}catch(s){console.log(s),n.dapp.provider.status.set("ERROR")}if(n.dapp.provider._ethersObject){const s=await n.dapp.provider.getNetwork();let t=await n.dapp.config.providers.find(a=>a.chainId===s.chainId);if(t)n.dapp.provider.status.set("CONNECTED");else if(n.dapp.provider.status.set("WRONG"),t=n.dapp.config.providers.getAll().find(a=>a.chainId===s.chainId),!t){const a={name:s.name,displayName:U(s.name),chainId:s.chainId};n.dapp.config.providers.append(a)}n.dapp.provider.on("network",(a,r)=>{r&&r!==a&&window.location.reload()}),n.dapp.provider.on("error",()=>{n.dapp.provider.status.set("ERROR")}),t&&t.pollingInterval&&(n.dapp.provider.pollingInterval=t.pollingInterval)}else{const s=n.dapp.config.providers.getDefault();s&&s.defaultRPC?(n.dapp.provider.proxy.setEthersObject(new u.ethers.providers.JsonRpcProvider(s.defaultRPC)),n.dapp.provider.status.set("CONNECTED")):n.dapp.provider.status.set("DISCONNECTED")}}async function je(){n.dapp.provider.onSafe(async function(){await N(!0)})}async function Te(){n.dapp.provider.onSafe(async function(){if(n.dapp.provider.status.is("WRONG")){for(const[a,r]of n.dapp.contracts.getAll())r.status.set("WRONG_NETWORK");n.dapp.contracts.status.set("WRONG_NETWORK");return}const s=await n.dapp.config.providers.getCurrent(),t=[];for(const[a,r]of Object.entries(s.contracts))n.dapp.contracts.add(a,r.address,r.abi),t.push(a);for(const[a,r]of Object.entries(n.dapp.contracts.getAll()))t.includes(a)?r.status.set("INITIALIZED"):r.status.set("WRONG_NETWORK");e.watch([n.dapp.signer.isSafe],(a,r)=>{if(console.log("Refresh contracts !"),a!==r)for(const o of t){const c=o,p=n.dapp.contracts[o].address,_=n.dapp.contracts[o].interface.format("json");n.dapp.contracts[o].proxy.setEthersObject(null);try{n.dapp.contracts.add(c,p,_)}catch(b){console.log(b),n.dapp.contracts.status.set("ERROR");break}}}),n.dapp.contracts.status.set("INITIALIZED")})}async function $e(){n.dapp.provider.onSafe(()=>{n.dapp.provider.on("block",async function(s){const t=await n.dapp.provider.getBlockWithTransactions(s);for(const a of t.transactions)Object.keys(n.dapp._chainWatchers).includes(a.to)&&await n.dapp._chainWatchers[a.to].update(),n.dapp.signer.status.is("CONNECTED")&&(await n.dapp.signer.getAddress(),a.from)})})}async function We(s){s.component("OnDappSafe",B),s.component("OnProviderSafe",V),s.component("OnSignerSafe",j),s.component("OnContractsReadSafe",T),s.component("OnContractsWriteSafe",$)}const Ae=Object.freeze(Object.defineProperty({__proto__:null,initProvider:Ve,initSigner:je,initContracts:Te,initWatchers:$e,initComponents:We},Symbol.toStringTag,{value:"Module"}));n.ChainWatcher=W,n.ConnectWalletButton=Z,n.ContractInteractor=de,n.DebugBar=_e,n.EthersContractProxy=g,n.EthersProviderProxy=A,n.EthersSignerProxy=M,n.OnContractReadSafe=ke,n.OnContractWriteSafe=Se,n.OnContractsReadSafe=T,n.OnContractsWriteSafe=$,n.OnDappSafe=B,n.OnProviderSafe=V,n.OnSignerSafe=j,n.SelectNetworkDropdown=ye,n.Status=E,n.VuethersConfig=F,n.capitalizeWords=U,n.connectWallet=N,n.deepMerge=k,n.disconnectWallet=C,n.initVuethers=Re,n.isObject=O,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
